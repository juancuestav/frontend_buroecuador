var Ce=Object.defineProperty;var Ee=(e,a,r)=>a in e?Ce(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;var J=(e,a,r)=>(Ee(e,typeof a!="symbol"?a+"":a,r),r);import{k as ge,ba as we,c as A,bL as Be,h as g,a2 as X,ak as Re,bR as ke,q as Ie,v as ze,r as F,b7 as Oe,aJ as Te,c3 as Ne,w as Pe,aY as Le,m as je,f as Ve,bg as De,bH as Qe,b6 as ce,g as xe,Q as Z,bG as $e,d as he,o as Me,c4 as _e,J as N,K as M,L as $,j as q,ad as Ge,S as P,O,ab as ie,bl as He,F as Ke,Z as We,G as Je,_ as Xe,U as oe,V as pe,M as me,N as ve,ac as Ye,P as Ze,B as eo,aN as oo}from"./index.6072a1b1.js";import{d as ao,E as ye}from"./EssentialTable.0effb8dc.js";import{b as io,Q as to}from"./QItem.159d8e83.js";import{Q as ro}from"./QSelect.8fa0bc61.js";import{C as lo}from"./ContenedorSimpleMixin.6f374d2f.js";import{u as so,a as no,b as uo,S as co}from"./SelectorImagen.5afa715e.js";import{S as po}from"./SimpleLayout.3639fcf0.js";import{E as mo}from"./EstadosComponent.69881137.js";import{Q as vo}from"./QCircularProgress.dce56917.js";import{h as fe}from"./format.8ac60962.js";import{e as fo}from"./utils.c7760b0c.js";import{u as Fe}from"./notificaciones.fe24470b.js";import{_ as Se}from"./plugin-vue_export-helper.21dcd24c.js";import{E as bo}from"./entidadAuditable.9f5621ba.js";import{T as go}from"./TransacccionSimpleController.f4dc3690.js";import{U as ho}from"./UsuarioController.38e978d2.js";import{u as _o}from"./filtrosGenerales.911f2280.js";import"./QChip.2863bbd0.js";import"./QTooltip.0b1018fa.js";import"./position-engine.71479b28.js";import"./selection.ec88bd7c.js";import"./QBadge.1ab9ad97.js";import"./QToolbarTitle.80dd577d.js";import"./logo.d1d9b491.js";import"./_commonjsHelpers.8402d862.js";import"./QMenu.6c964ac0.js";import"./StatusEssentialLoading.d6258813.js";import"./use-quasar.52f58024.js";import"./QImg.351239be.js";import"./QPage.2411b3e2.js";import"./buttonSubmits.178f5d81.js";import"./utils.508c826c.js";import"./date.3330acff.js";import"./Hidratable.166e9fe1.js";var yo=ge({name:"QBtnToggle",props:{...we,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(a=>("label"in a||"icon"in a||"slot"in a)&&"value"in a)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:a,emit:r}){const t=A(()=>e.options.find(s=>s.value===e.modelValue)!==void 0),m=A(()=>({type:"hidden",name:e.name,value:e.modelValue})),v=ke(m),S=A(()=>Be(e)),B=A(()=>({rounded:e.rounded,dense:e.dense,...S.value})),T=A(()=>e.options.map((s,b)=>{const{attrs:o,value:u,slot:C,...l}=s;return{slot:C,props:{key:b,"aria-pressed":u===e.modelValue?"true":"false",...o,...l,...B.value,disable:e.disable===!0||l.disable===!0,color:u===e.modelValue?d(l,"toggleColor"):d(l,"color"),textColor:u===e.modelValue?d(l,"toggleTextColor"):d(l,"textColor"),noCaps:d(l,"noCaps")===!0,noWrap:d(l,"noWrap")===!0,size:d(l,"size"),padding:d(l,"padding"),ripple:d(l,"ripple"),stack:d(l,"stack")===!0,stretch:d(l,"stretch")===!0,onClick(h){c(u,s,h)}}}}));function c(s,b,o){e.readonly!==!0&&(e.modelValue===s?e.clearable===!0&&(r("update:modelValue",null,null),r("clear")):r("update:modelValue",s,b),r("click",o))}function d(s,b){return s[b]===void 0?e[b]:s[b]}function U(){const s=T.value.map(b=>g(X,b.props,b.slot!==void 0?a[b.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&t.value===!0&&v(s,"push"),Re(a.default,s)}return()=>g(ao,{class:"q-btn-toggle",...S.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},U)}});const ae=[{name:"titulo",field:"titulo",label:"Titulo",align:"left",sortable:!0},{name:"created_at",field:"created_at",label:"Fecha hora subida archivos",align:"left",sortable:!0},{name:"archivos",field:"archivos",label:"Archivos",align:"left",sortable:!0}];function be(e){return(e*100).toFixed(2)+"%"}const Fo={...Ie,...so,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},qe=[...no,"start","finish","added","removed"];function So(e,a){const r=xe(),{props:t,slots:m,emit:v,proxy:S}=r,{$q:B}=S,T=ze(t,B);function c(i,p,w){if(i.__status=p,p==="idle"){i.__uploaded=0,i.__progress=0,i.__sizeLabel=fe(i.size),i.__progressLabel="0.00%";return}if(p==="failed"){S.$forceUpdate();return}i.__uploaded=p==="uploaded"?i.size:w,i.__progress=p==="uploaded"?1:Math.min(.9999,i.__uploaded/i.size),i.__progressLabel=be(i.__progress),S.$forceUpdate()}const d=A(()=>t.disable!==!0&&t.readonly!==!0),U=F(!1),s=F(null),b=F(null),o={files:F([]),queuedFiles:F([]),uploadedFiles:F([]),uploadedSize:F(0),updateFileStatus:c,isAlive:()=>Oe(r)===!1},{pickFiles:u,addFiles:C,onDragover:l,onDragleave:h,processFiles:G,getDndNode:H,maxFilesNumber:K,maxTotalSizeNumber:L}=uo({editable:d,dnd:U,getFileInput:le,addFilesToQueue:se});Object.assign(o,e({props:t,slots:m,emit:v,helpers:o,exposeApi:i=>{Object.assign(o,i)}})),o.isBusy===void 0&&(o.isBusy=F(!1));const _=F(0),f=A(()=>_.value===0?0:o.uploadedSize.value/_.value),y=A(()=>be(f.value)),I=A(()=>fe(_.value)),E=A(()=>d.value===!0&&o.isUploading.value!==!0&&(t.multiple===!0||o.queuedFiles.value.length===0)&&(t.maxFiles===void 0||o.files.value.length<K.value)&&(t.maxTotalSize===void 0||_.value<L.value)),n=A(()=>d.value===!0&&o.isBusy.value!==!0&&o.isUploading.value!==!0&&o.queuedFiles.value.length!==0);Te(Ne,ue);const j=A(()=>"q-uploader column no-wrap"+(T.value===!0?" q-uploader--dark q-dark":"")+(t.bordered===!0?" q-uploader--bordered":"")+(t.square===!0?" q-uploader--square no-border-radius":"")+(t.flat===!0?" q-uploader--flat no-shadow":"")+(t.disable===!0?" disabled q-uploader--disable":"")+(U.value===!0?" q-uploader--dnd":"")),V=A(()=>"q-uploader__header"+(t.color!==void 0?` bg-${t.color}`:"")+(t.textColor!==void 0?` text-${t.textColor}`:""));Pe(o.isUploading,(i,p)=>{p===!1&&i===!0?v("start"):p===!0&&i===!1&&v("finish")});function z(){t.disable===!1&&(o.abort(),o.uploadedSize.value=0,_.value=0,re(),o.files.value=[],o.queuedFiles.value=[],o.uploadedFiles.value=[])}function R(){t.disable===!1&&te(["uploaded"],()=>{o.uploadedFiles.value=[]})}function D(){te(["idle","failed"],({size:i})=>{_.value-=i,o.queuedFiles.value=[]})}function te(i,p){if(t.disable===!0)return;const w={files:[],size:0},Q=o.files.value.filter(k=>i.indexOf(k.__status)===-1?!0:(w.size+=k.size,w.files.push(k),k.__img!==void 0&&window.URL.revokeObjectURL(k.__img.src),!1));w.files.length!==0&&(o.files.value=Q,p(w),v("removed",w.files))}function ee(i){t.disable||(i.__status==="uploaded"?o.uploadedFiles.value=o.uploadedFiles.value.filter(p=>p.__key!==i.__key):i.__status==="uploading"?i.__abort():_.value-=i.size,o.files.value=o.files.value.filter(p=>p.__key!==i.__key?!0:(p.__img!==void 0&&window.URL.revokeObjectURL(p.__img.src),!1)),o.queuedFiles.value=o.queuedFiles.value.filter(p=>p.__key!==i.__key),v("removed",[i]))}function re(){o.files.value.forEach(i=>{i.__img!==void 0&&window.URL.revokeObjectURL(i.__img.src)})}function le(){return b.value||s.value.getElementsByClassName("q-uploader__input")[0]}function se(i,p){const w=G(i,p,o.files.value,!0),Q=le();Q!=null&&(Q.value=""),w!==void 0&&(w.forEach(k=>{if(o.updateFileStatus(k,"idle"),_.value+=k.size,t.noThumbnails!==!0&&k.type.toUpperCase().startsWith("IMAGE")){const de=new Image;de.src=window.URL.createObjectURL(k),k.__img=de}}),o.files.value=o.files.value.concat(w),o.queuedFiles.value=o.queuedFiles.value.concat(w),v("added",w),t.autoUpload===!0&&o.upload())}function ne(){n.value===!0&&o.upload()}function Y(i,p,w){if(i===!0){const Q={type:"a",key:p,icon:B.iconSet.uploader[p],flat:!0,dense:!0};let k;return p==="add"?(Q.onClick=u,k=ue):Q.onClick=w,g(X,Q,k)}}function ue(){return g("input",{ref:b,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:t.accept,multiple:t.multiple===!0?"multiple":void 0,capture:t.capture,onMousedown:Le,onClick:u,onChange:se})}function Ae(){return m.header!==void 0?m.header(W):[g("div",{class:"q-uploader__header-content column"},[g("div",{class:"flex flex-center no-wrap q-gutter-xs"},[Y(o.queuedFiles.value.length!==0,"removeQueue",D),Y(o.uploadedFiles.value.length!==0,"removeUploaded",R),o.isUploading.value===!0?g(ce,{class:"q-uploader__spinner"}):null,g("div",{class:"col column justify-center"},[t.label!==void 0?g("div",{class:"q-uploader__title"},[t.label]):null,g("div",{class:"q-uploader__subtitle"},[I.value+" / "+y.value])]),Y(E.value,"add"),Y(t.hideUploadBtn===!1&&n.value===!0,"upload",o.upload),Y(o.isUploading.value,"clear",o.abort)])])]}function Ue(){return m.list!==void 0?m.list(W):o.files.value.map(i=>g("div",{key:i.__key,class:"q-uploader__file relative-position"+(t.noThumbnails!==!0&&i.__img!==void 0?" q-uploader__file--img":"")+(i.__status==="failed"?" q-uploader__file--failed":i.__status==="uploaded"?" q-uploader__file--uploaded":""),style:t.noThumbnails!==!0&&i.__img!==void 0?{backgroundImage:'url("'+i.__img.src+'")',backgroundSize:t.thumbnailFit}:null},[g("div",{class:"q-uploader__file-header row flex-center no-wrap"},[i.__status==="failed"?g(Z,{class:"q-uploader__file-status",name:B.iconSet.type.negative,color:"negative"}):null,g("div",{class:"q-uploader__file-header-content col"},[g("div",{class:"q-uploader__title"},[i.name]),g("div",{class:"q-uploader__subtitle row items-center no-wrap"},[i.__sizeLabel+" / "+i.__progressLabel])]),i.__status==="uploading"?g(vo,{value:i.__progress,min:0,max:1,indeterminate:i.__progress===0}):g(X,{round:!0,dense:!0,flat:!0,icon:B.iconSet.uploader[i.__status==="uploaded"?"done":"clear"],onClick:()=>{ee(i)}})])]))}je(()=>{o.isUploading.value===!0&&o.abort(),o.files.value.length!==0&&re()});const W={};for(const i in o)Ve(o[i])===!0?De(W,i,()=>o[i].value):W[i]=o[i];return Object.assign(W,{upload:ne,reset:z,removeUploadedFiles:R,removeQueuedFiles:D,removeFile:ee,pickFiles:u,addFiles:C}),Qe(W,{canAddFiles:()=>E.value,canUpload:()=>n.value,uploadSizeLabel:()=>I.value,uploadProgressLabel:()=>y.value}),a({...o,upload:ne,reset:z,removeUploadedFiles:R,removeQueuedFiles:D,removeFile:ee,pickFiles:u,addFiles:C,canAddFiles:E,canUpload:n,uploadSizeLabel:I,uploadProgressLabel:y}),()=>{const i=[g("div",{class:V.value},Ae()),g("div",{class:"q-uploader__list scroll"},Ue()),H("uploader")];o.isBusy.value===!0&&i.push(g("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[g(ce)]));const p={ref:s,class:j.value};return E.value===!0&&Object.assign(p,{onDragover:l,onDragleave:h}),g("div",p,i)}}const qo=()=>!0;function Ao(e){const a={};return e.forEach(r=>{a[r]=qo}),a}const Uo=Ao(qe);var Co=({name:e,props:a,emits:r,injectPlugin:t})=>ge({name:e,props:{...Fo,...a},emits:$e(r)===!0?{...Uo,...r}:[...qe,...r],setup(m,{expose:v}){return So(t,v)}});function x(e){return typeof e=="function"?e:()=>e}const Eo="QUploader",wo={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Bo=["factoryFailed","uploaded","failed","uploading"];function Ro({props:e,emit:a,helpers:r}){const t=F([]),m=F([]),v=F(0),S=A(()=>({url:x(e.url),method:x(e.method),headers:x(e.headers),formFields:x(e.formFields),fieldName:x(e.fieldName),withCredentials:x(e.withCredentials),sendRaw:x(e.sendRaw),batch:x(e.batch)})),B=A(()=>v.value>0),T=A(()=>m.value.length!==0);let c;function d(){t.value.forEach(o=>{o.abort()}),m.value.length!==0&&(c=!0)}function U(){const o=r.queuedFiles.value.slice(0);r.queuedFiles.value=[],S.value.batch(o)?s(o):o.forEach(u=>{s([u])})}function s(o){if(v.value++,typeof e.factory!="function"){b(o,{});return}const u=e.factory(o);if(!u)a("factoryFailed",new Error("QUploader: factory() does not return properly"),o),v.value--;else if(typeof u.catch=="function"&&typeof u.then=="function"){m.value.push(u);const C=l=>{r.isAlive()===!0&&(m.value=m.value.filter(h=>h!==u),m.value.length===0&&(c=!1),r.queuedFiles.value=r.queuedFiles.value.concat(o),o.forEach(h=>{r.updateFileStatus(h,"failed")}),a("factoryFailed",l,o),v.value--)};u.then(l=>{c===!0?C(new Error("Aborted")):r.isAlive()===!0&&(m.value=m.value.filter(h=>h!==u),b(o,l))}).catch(C)}else b(o,u||{})}function b(o,u){const C=new FormData,l=new XMLHttpRequest,h=(n,j)=>u[n]!==void 0?x(u[n])(j):S.value[n](j),G=h("url",o);if(!G){console.error("q-uploader: invalid or no URL specified"),v.value--;return}const H=h("formFields",o);H!==void 0&&H.forEach(n=>{C.append(n.name,n.value)});let K=0,L=0,_=0,f=0,y;l.upload.addEventListener("progress",n=>{if(y===!0)return;const j=Math.min(f,n.loaded);r.uploadedSize.value+=j-_,_=j;let V=_-L;for(let z=K;V>0&&z<o.length;z++){const R=o[z];if(V>R.size)V-=R.size,K++,L+=R.size,r.updateFileStatus(R,"uploading",R.size);else{r.updateFileStatus(R,"uploading",V);return}}},!1),l.onreadystatechange=()=>{l.readyState<4||(l.status&&l.status<400?(r.uploadedFiles.value=r.uploadedFiles.value.concat(o),o.forEach(n=>{r.updateFileStatus(n,"uploaded")}),a("uploaded",{files:o,xhr:l})):(y=!0,r.uploadedSize.value-=_,r.queuedFiles.value=r.queuedFiles.value.concat(o),o.forEach(n=>{r.updateFileStatus(n,"failed")}),a("failed",{files:o,xhr:l})),v.value--,t.value=t.value.filter(n=>n!==l))},l.open(h("method",o),G),h("withCredentials",o)===!0&&(l.withCredentials=!0);const I=h("headers",o);I!==void 0&&I.forEach(n=>{l.setRequestHeader(n.name,n.value)});const E=h("sendRaw",o);o.forEach(n=>{r.updateFileStatus(n,"uploading",0),E!==!0&&C.append(h("fieldName",n),n,n.name),n.xhr=l,n.__abort=()=>{l.abort()},f+=n.size}),a("uploading",{files:o,xhr:l}),t.value.push(l),E===!0?l.send(new Blob(o)):l.send(C)}return{isUploading:B,isBusy:T,abort:d,upload:U}}var ko={name:Eo,props:wo,emits:Bo,injectPlugin:Ro},Io=Co(ko);const zo=[{name:"nombre",field:"nombre",label:"Nombre",align:"left"},{name:"tamanio_bytes",field:"tamanio_bytes",label:"Tama\xF1o",align:"left",editable:!1}];var Oo=he({components:{EssentialTable:ye},props:{mixin:{type:Object,required:!0},permitirEliminar:{type:Boolean,default:!0},listarAlGuardar:{type:Boolean,default:!0},disable:{type:Boolean,default:!1},permitirSubir:{type:Boolean,default:!0},quieroSubirArchivos:{type:Boolean,default:!1},label:{type:String,required:!1},multiple:{type:Boolean,default:!0}},emits:["inicializado"],setup(e,{emit:a}){const{listadoArchivos:r}=e.mixin.useReferencias(),{eliminarArchivo:t,listarArchivos:m,guardarFormData:v}=e.mixin.useComportamiento(),{notificarError:S,notificarAdvertencia:B,confirmar:T}=Fe();function c(f,y){m(f,y)}const d=F(0),U=F(0);let s;const b={titulo:"Eliminar",icono:"bi-trash3",color:"negative",visible:()=>e.permitirEliminar,accion:async({entidad:f})=>{T("Esta operaci\xF3n es irreversible. El archivo se eliminar\xE1 de forma instant\xE1nea.",()=>t(f))}},o={titulo:"Ver/Descargar",icono:"bi-eye",color:"positive",accion:({entidad:f})=>{fo(f.ruta)}},u=F();Me(()=>{a("inicializado")});const C=F(e.quieroSubirArchivos);async function l(f){var I;const y=new FormData;y.append("file",f[0]);for(const E in s)y.append(E,s[E]);try{await v(y),f.value=[],C.value=!1}catch(E){S(((I=E.response)==null?void 0:I.data).mensaje)}}function h(f){s=f,u.value&&(u.value.upload(),u.value.reset(),u.value.removeUploadedFiles(),u.value.removeQueuedFiles())}function G(){B("El tama\xF1o total de los archivos no deben exceder los 10mb.")}function H(){r.value=[]}function K(f){for(let y=0;y<f.length;y++)d.value+=1;U.value+=_(f)}function L(f){d.value-=1,U.value-=_(f)}function _(f){return f.reduce((I,E)=>I+E.size,0)}return{listadoArchivos:r,refGestor:u,quiero_subir_archivos:C,columnas:[...zo,_e],onRejected:G,btnEliminar:b,btnDescargar:o,onFileAdded:K,onFileRemoved:L,tamanioListado:U,cantElementos:d,factoryFn:l,subir:h,limpiarListado:H,listarArchivosAlmacenados:c}}});const To={key:0,class:"col-12 col-md-3 q-mb-lg"},No={key:0,class:"col-12 q-mb-sm"};function Po(e,a,r,t,m,v){return N(),M(Ke,null,[e.permitirSubir?(N(),M("div",To,[a[1]||(a[1]=$("br",null,null,-1)),q(Ge,{modelValue:e.quiero_subir_archivos,"onUpdate:modelValue":a[0]||(a[0]=S=>e.quiero_subir_archivos=S),label:e.label||"Quiero compartir archivos",disable:e.disable,color:"positive","checked-icon":"bi-eye",outlined:"",dense:""},null,8,["modelValue","label","disable"])])):P("",!0),q(ie,{name:"scale",mode:"out-in"},{default:O(()=>[e.quiero_subir_archivos?(N(),M("div",No,[q(Io,{ref:"refGestor",label:"Selecciona o arrastra tus archivos aqu\xED (M\xE1ximo 10mb)",multiple:e.multiple,style:{width:"100%"},flat:"",factory:e.factoryFn,class:"bg-header-collapse expansion",color:"white","text-color":"black","max-total-size":"10485760",onRejected:e.onRejected,onAdded:e.onFileAdded,onRemoved:e.onFileRemoved,"hide-upload-btn":""},null,8,["multiple","factory","onRejected","onAdded","onRemoved"])])):P("",!0)]),_:1}),e.quiero_subir_archivos?He(e.$slots,"boton-subir",{key:1}):P("",!0)],64)}var Lo=Se(Oo,[["render",Po]]);class jo extends bo{constructor(){super();J(this,"titulo");J(this,"user");J(this,"subido_por_user");J(this,"reporte");J(this,"archivos");this.titulo=null,this.user=null,this.subido_por_user=null,this.reporte=null,this.archivos=null}}class Vo extends go{constructor(){super(We.archivos_reportes)}}var Do=he({name:"verificar_cuenta",components:{SimpleLayout:po,SelectorImagen:co,EstadosComponent:mo,EssentialTable:ye,GestorArchivos:Lo},setup(){var V;const e=Je(),a=new lo(jo,new Vo),{entidad:r,listado:t,listadosAuxiliares:m}=a.useReferencias(),{listar:v,cargarVista:S,obtenerListados:B,editarParcial:T,eliminar:c}=a.useComportamiento(),d=A(()=>e.esAdministrador||e.esEmpleado),U={POR_IDENTIFICATION:"Buscar usuario por su identificaci\xF3n",POR_NOMBRES:"Buscar usuario por sus nombres o apellidos"},s=Xe({user_id:null,identificacion:null,tipo_seleccion:U.POR_IDENTIFICATION}),b=F(),o=F(),{prompt:u,confirmar:C,notificarInformacion:l}=Fe(),h=e.esCliente,{usuarios:G,filtrarUsuarios:H}=_o(m);async function K(){await b.value.subir({titulo:"Titulo",user:s.user_id,reporte:1})}const L=async()=>{await S(async()=>{await B({usuarios:{controller:new ho,params:{campos:"id,name,apellidos,identificacion",estado:1}}})})},_=async()=>{await v({user_id:s.tipo_seleccion===U.POR_NOMBRES?s.user_id:null,identificacion:s.tipo_seleccion===U.POR_IDENTIFICATION?s.identificacion:null}),s.tipo_seleccion===U.POR_IDENTIFICATION&&(s.user_id=t.value.length?t.value[0].user:y(s.identificacion)),t.value.length===0&&l("Este usuario no tiene archivos subidos a\xFAn")},f=async()=>{s.user_id=e.user.id,await v({user_id:s.user_id}),t.value.length===0&&l("Este usuario no tiene archivos subidos a\xFAn")},y=z=>{var R;return(R=m.usuarios.find(D=>D.identificacion===z))==null?void 0:R.id},I={titulo:"Renombrar",icono:"bi-cursor-text",color:"primary",visible:()=>d.value,accion:async({entidad:z})=>{u({titulo:"Renombrar",mensaje:"Ingrese el nuevo nombre",accion:async D=>{console.log(D),console.log(z.id),await T(z.id,{titulo:D})}})}},E={titulo:"Eliminar",icono:"bi-trash",color:"negative",visible:()=>d.value,accion:async({entidad:z})=>{C("Esta operaci\xF3n es irreversible. El archivo se eliminar\xE1 de manera inmediata.",()=>c(z))}},n={titulo:"Actualizar listado de archivos",icono:"bi-arrow-clockwise",color:"positive",visible:()=>d.value,accion:()=>_()},j={titulo:"Actualizar mis archivos",icono:"bi-arrow-clockwise",color:"positive",visible:()=>e.esCliente,accion:()=>f()};return d.value?L():(s.user_id=e.user.id,v({user_id:(V=s.user_id)!=null?V:""})),{id:o,refArchivo:b,mixin:a,listado:t,verificaCuenta:r,configuracionColumnasArchivoReporte:ae,filtroUsuario:s,listadosAuxiliares:m,subirArchivos:K,usuarios:G,filtrarUsuarios:H,listarArchivos:_,btnRenombrar:I,btnEliminar:E,btnActualizarListado:n,esCliente:h,columnas:d.value?[...ae,_e]:ae,puedeSubirArchivos:d,tipoSeleccionUsuario:U,consultarUsuarios:L,listarMisArchivos:f,btnActualizarMisArchivos:j,titulo:e.esCliente?"Mi bur\xF3":"Compartir archivos a clientes"}}});const Qo={class:"row"},xo={key:0,class:"col-12 q-mb-md"},$o={key:1,class:"col-12 q-mb-md"},Mo={key:2,class:"col-12 col-md-9 q-mb-md"},Go={key:3,class:"col-12 col-md-3"},Ho={class:"col-12 q-mb-md"},Ko={key:0,class:"col-12"},Wo={key:0,class:"text-cednter q-mb-md"};function Jo(e,a,r,t,m,v){const S=oe("gestor-archivos"),B=oe("essential-table"),T=oe("simple-layout");return N(),pe(T,{mixin:e.mixin,mostrarButtonSubmits:!1,titulo:e.titulo},{formulario:O(()=>[$("div",Qo,[e.puedeSubirArchivos?(N(),M("div",xo,[q(yo,{modelValue:e.filtroUsuario.tipo_seleccion,"onUpdate:modelValue":[a[0]||(a[0]=c=>e.filtroUsuario.tipo_seleccion=c),a[1]||(a[1]=()=>{e.listado=[],e.filtroUsuario.user_id=null,e.filtroUsuario.identificacion=null})],class:"toggle-button-primary",spread:"","no-caps":"",rounded:"","toggle-color":"primary",unelevated:"",options:[{label:e.tipoSeleccionUsuario.POR_IDENTIFICATION,value:e.tipoSeleccionUsuario.POR_IDENTIFICATION},{label:e.tipoSeleccionUsuario.POR_NOMBRES,value:e.tipoSeleccionUsuario.POR_NOMBRES}]},null,8,["modelValue","options"])])):P("",!0),e.puedeSubirArchivos&&e.filtroUsuario.tipo_seleccion===e.tipoSeleccionUsuario.POR_NOMBRES?(N(),M("div",$o,[a[11]||(a[11]=$("label",{class:"q-mb-sm block"},"Seleccione un usuario para listar o subir sus archivos",-1)),q(ro,{modelValue:e.filtroUsuario.user_id,"onUpdate:modelValue":[a[3]||(a[3]=c=>e.filtroUsuario.user_id=c),a[4]||(a[4]=c=>e.listarArchivos())],options:e.usuarios,onFilter:e.filtrarUsuarios,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0","option-label":c=>c.apellidos+" "+c.name,"option-value":c=>c.id,"emit-value":"","map-options":""},{"no-option":O(()=>[q(io,null,{default:O(()=>[q(to,{class:"text-grey"},{default:O(()=>a[9]||(a[9]=[me(" No hay resultados ")])),_:1})]),_:1})]),after:O(()=>[$("div",null,[q(X,{color:"positive","no-caps":"",push:"",class:"full-width",onClick:a[2]||(a[2]=c=>e.consultarUsuarios())},{default:O(()=>[q(Z,{name:"bi-arrow-clockwise",size:"xs",class:"q-pr-sm"}),a[10]||(a[10]=$("span",null,ve("Refrescar listado de usuarios"),-1))]),_:1})])]),_:1},8,["modelValue","options","onFilter","option-label","option-value"])])):P("",!0),e.puedeSubirArchivos&&e.filtroUsuario.tipo_seleccion===e.tipoSeleccionUsuario.POR_IDENTIFICATION?(N(),M("div",Mo,[a[12]||(a[12]=$("label",{class:"q-mb-sm block"},"Escriba la identificaci\xF3n del usuario para listar o subir sus archivos",-1)),q(Ze,{modelValue:e.filtroUsuario.identificacion,"onUpdate:modelValue":a[5]||(a[5]=c=>e.filtroUsuario.identificacion=c),placeholder:"Escriba la identificaci\xF3n y luego presione ENTER o buscar por identificaci\xF3n",onKeyup:a[6]||(a[6]=Ye(c=>e.listarArchivos(),["enter"])),outlined:"",dense:""},null,8,["modelValue"])])):P("",!0),e.puedeSubirArchivos&&e.filtroUsuario.tipo_seleccion===e.tipoSeleccionUsuario.POR_IDENTIFICATION?(N(),M("div",Go,[a[14]||(a[14]=$("label",{class:"block q-mb-sm"},"\xA0",-1)),q(X,{color:"primary","no-caps":"",unelevated:"",square:"",class:"full-width",onClick:a[7]||(a[7]=c=>e.listarArchivos())},{default:O(()=>[q(Z,{name:"bi-search",size:"xs",class:"q-pr-sm"}),a[13]||(a[13]=$("span",null,ve("Buscar por identificaci\xF3n"),-1))]),_:1})])):P("",!0),e.puedeSubirArchivos?(N(),pe(ie,{key:4,name:"scale",mode:"out-in"},{default:O(()=>[eo($("div",Ho,[q(S,{ref:"refArchivo",label:"Adjuntar archivos",mixin:e.mixin,"permitir-eliminar":!0,multiple:!1},{"boton-subir":O(()=>[q(X,{color:"positive","no-caps":"",unelevated:"",class:"full-width q-mb-lg",onClick:a[8]||(a[8]=c=>e.subirArchivos())},{default:O(()=>[q(Z,{name:"bi-upload",class:"q-mr-sm",size:"xs"}),a[15]||(a[15]=me(" Subir archivos seleccionados"))]),_:1})]),_:1},8,["mixin"])],512),[[oo,e.filtroUsuario.user_id]])]),_:1})):P("",!0),q(ie,{name:"scale",mode:"out-in"},{default:O(()=>[e.filtroUsuario.user_id?(N(),M("div",Ko,[e.puedeSubirArchivos?P("",!0):(N(),M("div",Wo," Aqu\xED encontrar\xE1s todos los reportes de cr\xE9dito que adquieras con nosotros. ")),q(B,{titulo:"Archivos compartidos",configuracionColumnas:e.columnas,datos:e.listado,permitirFiltrar:!0,"permitir-buscar":!e.esCliente,mostrarExportar:!0,"permitir-consultar":!1,"permitir-editar":!1,"permitir-eliminar":!1,ajustarCeldas:!0,"mostrar-exportar":!1,"permitir-filtrar":!1,accion1Header:e.btnActualizarListado,accion2Header:e.btnActualizarMisArchivos,accion1:e.btnRenombrar,accion2:e.btnEliminar},null,8,["configuracionColumnas","datos","permitir-buscar","accion1Header","accion2Header","accion1","accion2"])])):P("",!0)]),_:1})])]),_:1},8,["mixin","titulo"])}var Ia=Se(Do,[["render",Jo]]);export{Ia as default};
