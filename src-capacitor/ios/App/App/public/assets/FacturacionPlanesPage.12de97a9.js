import{Q as D}from"./QPage.2411b3e2.js";import{d as p}from"./date.3330acff.js";import{E as h}from"./EssentialTableTabs.c77f843c.js";import{d as C,r as w,a0 as E,Z as d,U as y,J as F,V as P,O as Y,L as r,j as M}from"./index.6072a1b1.js";import{u as A}from"./notificaciones.fe24470b.js";import{a as b}from"./utils.c7760b0c.js";import{S as O}from"./StatusEssentialLoading.d6258813.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.8ac60962.js";import"./QTabs.4b078992.js";import"./QResizeObserver.cd2c994f.js";import"./QSelect.8fa0bc61.js";import"./QChip.2863bbd0.js";import"./QItem.159d8e83.js";import"./QMenu.6c964ac0.js";import"./position-engine.71479b28.js";import"./selection.ec88bd7c.js";import"./EssentialTable.0effb8dc.js";import"./QTooltip.0b1018fa.js";import"./QBadge.1ab9ad97.js";import"./QToolbarTitle.80dd577d.js";import"./logo.d1d9b491.js";import"./_commonjsHelpers.8402d862.js";import"./EstadosComponent.69881137.js";import"./utils.508c826c.js";import"./use-quasar.52f58024.js";const B=[{name:"identificacion",field:"identificacion",label:"Identificaci\xF3n",align:"left",sortable:!0},{name:"cliente",field:"cliente",label:"Cliente",align:"left",sortable:!0},{name:"pagado",field:"pagado",label:"Mes pagado",align:"left",sortable:!0},{name:"fecha_pago",field:"fecha_pago",label:"Fecha de \xFAltimo pago",align:"left",sortable:!0},{name:"proximo_pago",field:"proximo_pago",label:"Fecha de pr\xF3ximo pago",align:"left",sortable:!0},{name:"acciones",field:"acciones",label:"Acciones",align:"center"}];var I=C({components:{EssentialTableTabs:h},setup(){const a=w([]),{notificarCorrecto:e}=A(),i=E.getInstance(),n=new O;async function m(o,t){const{addToDate:s}=p,c=p.formatDate(Date.now(),"YYYY-MM-DD"),x=s(new Date,{months:1}),_=i.getEndpoint(d.facturacion_planes)+"/"+o;try{const g=await i.put(_,{});a.value[t].pagado=!0,a.value[t].fecha_pago=c,a.value[t].proximo_pago=p.formatDate(x,"YYYY-MM-DD"),a.value=[...a.value],e(g.data.mensaje)}catch{}}async function u(o,t){const s=i.getEndpoint(d.facturacion_planes)+"/"+o;try{const c=await i.delete(s);a.value[t].pagado=!1,a.value=[...a.value],e(c.data.mensaje)}catch{}}const l={titulo:"Marcar como pagado",icono:"bi-check",color:"positive",visible:({entidad:o})=>!o.pagado,accion:({entidad:o})=>{n.activar();const t=b(a.value,o.id);m(o.id,t),n.desactivar()}},v={titulo:"Marcar como no pagado",icono:"bi-x",visible:({entidad:o})=>o.pagado,color:"negative",accion:({entidad:o})=>{n.activar();const t=b(a.value,o.id);u(o.id,t),n.desactivar()}};async function f(o){n.activar();const t=i.getEndpoint(d.facturacion_planes,{pagado:o}),s=await i.get(t);a.value=[...s.data.results],n.desactivar()}return f("true"),{listado:a,configuracionColumnasFacturacion:B,pagado:l,noPagado:v,tabOptions:[{label:"Pagados",value:"true"},{label:"No pagados",value:"false"}],obtenerListado:f}}});const k={class:"row"},L={class:"col-12"};function N(a,e,i,n,m,u){const l=y("essential-table-tabs");return F(),P(D,{padding:""},{default:Y(()=>[e[0]||(e[0]=r("h1",{class:"text-h6 text-center text-primary q-mb-md"},"BUR\xD3 DE CR\xC9DITO ECUADOR",-1)),e[1]||(e[1]=r("div",{class:"text-center"},"Estado del pago de los clientes.",-1)),e[2]||(e[2]=r("small",{class:"full-width block text-center q-mb-md"},"(Al marcar como pagado se le activa la app al cliente)",-1)),r("div",k,[r("div",L,[M(l,{configuracionColumnas:a.configuracionColumnasFacturacion,datos:a.listado,"permitir-consultar":!1,"permitir-editar":!1,"permitir-eliminar":!1,accion1:a.pagado,accion2:a.noPagado,"tab-options":a.tabOptions,onTabSeleccionado:a.obtenerListado,tabDefecto:"true"},null,8,["configuracionColumnas","datos","accion1","accion2","tab-options","onTabSeleccionado"])])])]),_:1})}var da=T(I,[["render",N]]);export{da as default};
