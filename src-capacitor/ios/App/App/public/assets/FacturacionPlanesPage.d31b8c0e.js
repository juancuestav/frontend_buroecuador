import{Q as D}from"./QPage.161283b6.js";import{d as p}from"./date.0b7cec79.js";import{E as h}from"./EssentialTableTabs.1169a75b.js";import{d as C,r as w,a2 as E,a0 as P,_ as d,V as y,K as F,X as M,P as Y,M as r,j as A}from"./index.aea1effc.js";import{u as T}from"./notificaciones.305263b9.js";import{a as b}from"./utils.27a4761f.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.8ac60962.js";import"./QTabs.18a819ba.js";import"./QResizeObserver.5837b731.js";import"./QSelect.2477ae10.js";import"./QChip.f8291af0.js";import"./QItem.287f8ef9.js";import"./QMenu.ef20bc9f.js";import"./position-engine.c19cb930.js";import"./selection.a0a4309d.js";import"./EssentialTable.a2272a35.js";import"./QTooltip.d74f897f.js";import"./QBadge.66caf36c.js";import"./QToolbarTitle.2f0d394a.js";import"./logo.d1d9b491.js";import"./_commonjsHelpers.80d8c10d.js";import"./EstadosComponent.4d132387.js";import"./utils.508c826c.js";const I=[{name:"identificacion",field:"identificacion",label:"Identificaci\xF3n",align:"left",sortable:!0},{name:"cliente",field:"cliente",label:"Cliente",align:"left",sortable:!0},{name:"pagado",field:"pagado",label:"Mes pagado",align:"left",sortable:!0},{name:"fecha_pago",field:"fecha_pago",label:"Fecha de \xFAltimo pago",align:"left",sortable:!0},{name:"proximo_pago",field:"proximo_pago",label:"Fecha de pr\xF3ximo pago",align:"left",sortable:!0},{name:"acciones",field:"acciones",label:"Acciones",align:"center"}];var O=C({components:{EssentialTableTabs:h},setup(){const a=w([]),{notificarCorrecto:e}=T(),i=E.getInstance(),n=new P;async function m(o,t){const{addToDate:s}=p,c=p.formatDate(Date.now(),"YYYY-MM-DD"),x=s(new Date,{months:1}),_=i.getEndpoint(d.facturacion_planes)+"/"+o;try{const g=await i.put(_,{});a.value[t].pagado=!0,a.value[t].fecha_pago=c,a.value[t].proximo_pago=p.formatDate(x,"YYYY-MM-DD"),a.value=[...a.value],e(g.data.mensaje)}catch{}}async function u(o,t){const s=i.getEndpoint(d.facturacion_planes)+"/"+o;try{const c=await i.delete(s);a.value[t].pagado=!1,a.value=[...a.value],e(c.data.mensaje)}catch{}}const l={titulo:"Marcar como pagado",icono:"bi-check",color:"positive",visible:({entidad:o})=>!o.pagado,accion:({entidad:o})=>{n.activar();const t=b(a.value,o.id);m(o.id,t),n.desactivar()}},v={titulo:"Marcar como no pagado",icono:"bi-x",visible:({entidad:o})=>o.pagado,color:"negative",accion:({entidad:o})=>{n.activar();const t=b(a.value,o.id);u(o.id,t),n.desactivar()}};async function f(o){n.activar();const t=i.getEndpoint(d.facturacion_planes,{pagado:o}),s=await i.get(t);a.value=[...s.data.results],n.desactivar()}return f("true"),{listado:a,configuracionColumnasFacturacion:I,pagado:l,noPagado:v,tabOptions:[{label:"Pagados",value:"true"},{label:"No pagados",value:"false"}],obtenerListado:f}}});const k={class:"row"},N={class:"col-12"};function R(a,e,i,n,m,u){const l=y("essential-table-tabs");return F(),M(D,{padding:""},{default:Y(()=>[e[0]||(e[0]=r("h1",{class:"text-h6 text-center text-primary q-mb-md"},"BUR\xD3 DE CR\xC9DITO ECUADOR",-1)),e[1]||(e[1]=r("div",{class:"text-center"},"Estado del pago de los clientes.",-1)),e[2]||(e[2]=r("small",{class:"full-width block text-center q-mb-md"},"(Al marcar como pagado se le activa la app al cliente)",-1)),r("div",k,[r("div",N,[A(l,{configuracionColumnas:a.configuracionColumnasFacturacion,datos:a.listado,"permitir-consultar":!1,"permitir-editar":!1,"permitir-eliminar":!1,accion1:a.pagado,accion2:a.noPagado,"tab-options":a.tabOptions,onTabSeleccionado:a.obtenerListado,tabDefecto:"true"},null,8,["configuracionColumnas","datos","accion1","accion2","tab-options","onTabSeleccionado"])])])]),_:1})}var la=B(O,[["render",R]]);export{la as default};
