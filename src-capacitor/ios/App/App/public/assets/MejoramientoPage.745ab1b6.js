var C=Object.defineProperty;var P=(e,s,o)=>s in e?C(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o;var m=(e,s,o)=>(P(e,typeof s!="symbol"?s+"":s,o),o);import{d as D,K as n,L as u,M as a,j as i,R as d,r as j,$ as F,c1 as I,c2 as A,b$ as B,a2 as k,_ as y,b5 as x,V as L,X as w,P as c,Y as $,F as q,a5 as O,Q as E,O as f,a4 as h,a8 as z,N as H}from"./index.aea1effc.js";import{Q}from"./QSelect.2477ae10.js";import{Q as R}from"./QForm.5ecf612c.js";import{Q as K}from"./QPage.161283b6.js";import{r as g}from"./index.cab36ed2.js";import{u as T}from"./index.9737fa5c.js";import{E as X}from"./entidadAuditable.9f5621ba.js";import{u as Y}from"./notificaciones.305263b9.js";import{b as G}from"./utils.27a4761f.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.f8291af0.js";import"./QItem.287f8ef9.js";import"./QMenu.ef20bc9f.js";import"./position-engine.c19cb930.js";import"./selection.a0a4309d.js";import"./format.8ac60962.js";import"./Hidratable.166e9fe1.js";import"./date.0b7cec79.js";const W={class:"rounded-card bg-solid q-pa-xs rounded mb-3"},Z={class:"row q-col-gutter-sm q-py-md"},_={class:"col-12 col-md-3 q-mb-md"},ee={class:"col-12 col-md-3 q-mb-md"},oe={class:"col-12 col-md-3 q-mb-md"},se={class:"col-12 col-md-3 q-mb-md"},ae={class:"col-12 col-md-3 q-mb-md"},te={class:"col-12 col-md-3 q-mb-md"},le={class:"col-12 col-md-3 q-mb-md"},ie=D({__name:"CardMejoramiento",props:["mejoramiento"],setup(e){return(s,o)=>(n(),u("div",W,[a("div",Z,[a("div",_,[o[7]||(o[7]=a("label",{class:"q-mb-sm block"},"Puntaje actual",-1)),i(d,{modelValue:e.mejoramiento.puntaje_actual,"onUpdate:modelValue":o[0]||(o[0]=l=>e.mejoramiento.puntaje_actual=l),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",ee,[o[8]||(o[8]=a("label",{class:"q-mb-sm block"},"Deudas vencidas",-1)),i(d,{modelValue:e.mejoramiento.deudas_vencidas,"onUpdate:modelValue":o[1]||(o[1]=l=>e.mejoramiento.deudas_vencidas=l),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",oe,[o[9]||(o[9]=a("label",{class:"q-mb-sm block"},"Puntaje a subir",-1)),i(d,{modelValue:e.mejoramiento.puntaje_subir,"onUpdate:modelValue":o[2]||(o[2]=l=>e.mejoramiento.puntaje_subir=l),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",se,[o[10]||(o[10]=a("label",{class:"q-mb-sm block"},"M\xE1ximo a subir",-1)),i(d,{modelValue:e.mejoramiento.maximo_subir,"onUpdate:modelValue":o[3]||(o[3]=l=>e.mejoramiento.maximo_subir=l),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",ae,[o[11]||(o[11]=a("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),i(d,{modelValue:e.mejoramiento.observacion,"onUpdate:modelValue":o[4]||(o[4]=l=>e.mejoramiento.observacion=l),type:"textarea",autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",te,[o[12]||(o[12]=a("label",{class:"q-mb-sm block"},"Estado",-1)),i(d,{modelValue:e.mejoramiento.estado,"onUpdate:modelValue":o[5]||(o[5]=l=>e.mejoramiento.estado=l),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",le,[o[13]||(o[13]=a("label",{class:"q-mb-sm block"},"Fecha de solicitud",-1)),i(d,{modelValue:e.mejoramiento.fecha,"onUpdate:modelValue":o[6]||(o[6]=l=>e.mejoramiento.fecha=l),disable:"",outlined:"",dense:""},null,8,["modelValue"])])])]))}});var ne=ie;class U extends X{constructor(){super();m(this,"puntaje_actual");m(this,"deudas_vencidas");m(this,"puntaje_subir");m(this,"maximo_subir");m(this,"observacion");m(this,"estado");m(this,"fecha");this.puntaje_actual=null,this.deudas_vencidas=null,this.puntaje_subir=null,this.maximo_subir=null,this.observacion=null,this.estado=null,this.fecha=null}}var de=D({components:{CardMejoramiento:ne},setup(){const e=j([]),s=j(),o=F(new U);o.fecha=new Date().toLocaleDateString();const l=j(!1),b=j(),p=T({puntaje_actual:{required:g},deudas_vencidas:{required:g},puntaje_subir:{required:g}},o),t=Y();async function M(){const v=k.getInstance(),V=v.getEndpoint(y.mejoramiento);try{const r=await v.get(V);s.value=r.data.results,b.value=r.data.cantidadSolicitudesEnviadas}catch{}}M();async function N(){if(!await p.value.$validate())return t.notificarAdvertencia("Verifique el formulario");const v=k.getInstance(),V=v.getEndpoint(y.mejoramiento);try{const r=await v.post(V,o);t.notificarCorrecto(r.data.mensaje),s.value=r.data.modelo,o.hydrate(new U),o.fecha=new Date().toLocaleDateString(),b.value=b.value+1,p.value.$reset()}catch(r){G(new x(r),t)}}return{solicitudesEnviadas:b,listado:e,mejoramiento:o,nuevoMensaje:l,enviar:N,solicitudData:s,estadosSI_NO:I,puntuaciones:A,estadosMejoramiento:B,v$:p}}});const re={class:"row q-col-gutter-sm q-pa-sm bg-desenfoques"},me={class:"col-12 col-md-3"},ue={class:"error-msg"},ce={class:"col-12 col-md-3"},be={class:"error-msg"},pe={class:"col-12 col-md-3"},ve={class:"error-msg"},je={class:"col-12 col-md-3"},fe={class:"row q-py-md justify-center"},Ve={class:"text-center"},$e={class:"q-mb-md text-bold"},qe={key:1};function ge(e,s,o,l,b,S){const p=L("card-mejoramiento");return n(),w(K,{padding:""},{default:c(()=>[s[12]||(s[12]=a("div",{class:"text-h6 q-mb-lg"},"Solicitar mejoramiento",-1)),i(R,{onSubmit:s[5]||(s[5]=h(()=>{},["prevent"]))},{default:c(()=>[a("div",re,[a("div",me,[s[6]||(s[6]=a("label",{class:"q-mb-sm block"},"Puntaje actual",-1)),i(d,{modelValue:e.mejoramiento.puntaje_actual,"onUpdate:modelValue":s[0]||(s[0]=t=>e.mejoramiento.puntaje_actual=t),error:!!e.v$.puntaje_actual.$errors.length,type:"number",outlined:"",dense:""},{error:c(()=>[(n(!0),u(q,null,$(e.v$.puntaje_actual.$errors,t=>(n(),u("div",{key:t.$uid},[a("div",ue,f(t.$message),1)]))),128))]),_:1},8,["modelValue","error"])]),a("div",ce,[s[7]||(s[7]=a("label",{class:"q-mb-sm block"},"Deudas vencidas",-1)),i(Q,{modelValue:e.mejoramiento.deudas_vencidas,"onUpdate:modelValue":s[1]||(s[1]=t=>e.mejoramiento.deudas_vencidas=t),error:!!e.v$.deudas_vencidas.$errors.length,options:e.estadosSI_NO,"transition-show":"flip-up","transition-hide":"flip-down","options-dense":"",dense:"",outlined:"","emit-value":"","map-options":""},{error:c(()=>[(n(!0),u(q,null,$(e.v$.deudas_vencidas.$errors,t=>(n(),u("div",{key:t.$uid},[a("div",be,f(t.$message),1)]))),128))]),_:1},8,["modelValue","error","options"])]),a("div",pe,[s[8]||(s[8]=a("label",{class:"q-mb-sm block"},"Puntaje a subir",-1)),i(Q,{modelValue:e.mejoramiento.puntaje_subir,"onUpdate:modelValue":s[2]||(s[2]=t=>e.mejoramiento.puntaje_subir=t),error:!!e.v$.puntaje_subir.$errors.length,options:e.puntuaciones,"transition-show":"flip-up","transition-hide":"flip-down","options-dense":"",dense:"",outlined:"","emit-value":"","map-options":""},{error:c(()=>[(n(!0),u(q,null,$(e.v$.puntaje_subir.$errors,t=>(n(),u("div",{key:t.$uid},[a("div",ve,f(t.$message),1)]))),128))]),_:1},8,["modelValue","error","options"])]),a("div",je,[s[9]||(s[9]=a("label",{class:"q-mb-sm block"},"Fecha de solicitud",-1)),i(d,{modelValue:e.mejoramiento.fecha,"onUpdate:modelValue":s[3]||(s[3]=t=>e.mejoramiento.fecha=t),disable:"",outlined:"",dense:""},null,8,["modelValue"])])]),a("div",fe,[i(O,{class:"q-mx-sm",color:"primary","no-caps":"",push:"",onClick:s[4]||(s[4]=t=>e.enviar())},{default:c(()=>[i(E,{name:"bi-send",size:"xs",class:"q-pr-sm"}),s[10]||(s[10]=a("span",null,"Enviar solicitud",-1))]),_:1})]),a("div",Ve,[a("small",null," Has enviado "+f(e.solicitudesEnviadas)+" solicitud(es) \xE9ste mes. ",1)])]),_:1}),i(z,{horizontal:"",inset:"",class:"q-my-lg"}),a("div",$e,[i(E,{name:"bi-check-circle-fill",class:"q-mr-sm",color:"positive"}),s[11]||(s[11]=H(" Estado de su solicitud "))]),e.solicitudData?(n(),w(p,{key:0,mejoramiento:e.solicitudData},null,8,["mejoramiento"])):(n(),u("div",qe,"A\xFAn no has enviado ninguna solicitud."))]),_:1})}var he=J(de,[["render",ge]]);export{he as default};
