import{d as v,r as u,a0 as j,Z as d,U as C,J as E,V as y,O as b,L as g,j as r,P as q,Q as N,M as V,a2 as w}from"./index.6072a1b1.js";import{Q}from"./QPage.2411b3e2.js";import{u as x}from"./notificaciones.fe24470b.js";import{E as $}from"./EssentialTable.0effb8dc.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-quasar.52f58024.js";import"./QSelect.8fa0bc61.js";import"./QChip.2863bbd0.js";import"./QItem.159d8e83.js";import"./QMenu.6c964ac0.js";import"./position-engine.71479b28.js";import"./selection.ec88bd7c.js";import"./format.8ac60962.js";import"./QTooltip.0b1018fa.js";import"./QBadge.1ab9ad97.js";import"./utils.c7760b0c.js";import"./date.3330acff.js";import"./QToolbarTitle.80dd577d.js";import"./logo.d1d9b491.js";import"./_commonjsHelpers.8402d862.js";import"./EstadosComponent.69881137.js";import"./utils.508c826c.js";const B=[{name:"fecha",field:"fecha",label:"Fecha",align:"left",sortable:!0},{name:"mensaje",field:"mensaje",label:"Mensaje",align:"left",sortable:!0},{name:"acciones",field:"acciones",label:"Acciones",align:"center"}];var M=v({props:["notificaciones"],components:{EssentialTable:$},setup(){const a=u([]),e=u(),f=u(!1),o=j.getInstance(),n=x();async function l(){const s=o.getEndpoint(d.notificaciones_cliente),m=(await o.get(s)).data.results;a.value=[...m]}async function c(){const s=o.getEndpoint(d.notificaciones_cliente);try{const t=await o.post(s,{mensaje:e.value});n.notificarCorrecto(t.data.mensaje),a.value.push(t.data.modelo),e.value=null}catch{n.notificarError("No se pudo enviar mensaje")}}async function i({entidad:s,posicion:t}){const m=o.getEndpoint(d.notificaciones_cliente)+"/"+s.id;try{const p=await o.delete(m);n.notificarCorrecto(p.data.mensaje),a.value.splice(t,1)}catch(p){n.notificarError(p.response.data.mensaje)}}return l(),{listado:a,obtenerListado:l,mensaje:e,nuevoMensaje:f,configuracionColumnas:B,eliminar:i,enviar:c}}});function I(a,e,f,o,n,l){const c=C("essential-table");return E(),y(Q,{padding:""},{default:b(()=>[e[3]||(e[3]=g("div",{class:"text-h6 q-mb-md"},"Notificaciones para los clientes",-1)),e[4]||(e[4]=g("label",{class:"q-mb-sm block"},"Mensaje",-1)),r(q,{modelValue:a.mensaje,"onUpdate:modelValue":e[0]||(e[0]=i=>a.mensaje=i),class:"q-mb-xs",type:"textarea",placeholder:"Escriba su mensaje aqu\xED",autogrow:"",outlined:"",dense:""},null,8,["modelValue"]),r(w,{color:"primary",class:"full-width q-mb-md","no-caps":"",square:"",unelevated:"",onClick:e[1]||(e[1]=i=>a.enviar())},{default:b(()=>[r(N,{name:"bi-send",class:"q-mr-sm",size:"xs"}),e[2]||(e[2]=V(" Enviar a todos los clientes "))]),_:1}),r(c,{configuracionColumnas:a.configuracionColumnas,datos:a.listado,onEliminar:a.eliminar,"permitir-consultar":!1,"permitir-editar":!1,"mostrar-header":!1,"mostrar-footer":!1},null,8,["configuracionColumnas","datos","onEliminar"])]),_:1})}var ae=k(M,[["render",I]]);export{ae as default};
