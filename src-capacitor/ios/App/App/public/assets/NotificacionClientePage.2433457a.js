import{d as v,r as u,a2 as j,_ as d,V as C,K as E,X as y,P as b,M as g,j as r,R as N,Q as q,N as V,a5 as w}from"./index.aea1effc.js";import{Q}from"./QPage.161283b6.js";import{u as x}from"./notificaciones.305263b9.js";import{E as $}from"./EssentialTable.a2272a35.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import"./QSelect.2477ae10.js";import"./QChip.f8291af0.js";import"./QItem.287f8ef9.js";import"./QMenu.ef20bc9f.js";import"./position-engine.c19cb930.js";import"./selection.a0a4309d.js";import"./format.8ac60962.js";import"./QTooltip.d74f897f.js";import"./QBadge.66caf36c.js";import"./utils.27a4761f.js";import"./date.0b7cec79.js";import"./QToolbarTitle.2f0d394a.js";import"./logo.d1d9b491.js";import"./_commonjsHelpers.80d8c10d.js";import"./EstadosComponent.4d132387.js";import"./utils.508c826c.js";const B=[{name:"fecha",field:"fecha",label:"Fecha",align:"left",sortable:!0},{name:"mensaje",field:"mensaje",label:"Mensaje",align:"left",sortable:!0},{name:"acciones",field:"acciones",label:"Acciones",align:"center"}];var M=v({props:["notificaciones"],components:{EssentialTable:$},setup(){const a=u([]),e=u(),f=u(!1),o=j.getInstance(),t=x();async function l(){const s=o.getEndpoint(d.notificaciones_cliente),m=(await o.get(s)).data.results;a.value=[...m]}async function c(){const s=o.getEndpoint(d.notificaciones_cliente);try{const n=await o.post(s,{mensaje:e.value});t.notificarCorrecto(n.data.mensaje),a.value.push(n.data.modelo),e.value=null}catch{t.notificarError("No se pudo enviar mensaje")}}async function i({entidad:s,posicion:n}){const m=o.getEndpoint(d.notificaciones_cliente)+"/"+s.id;try{const p=await o.delete(m);t.notificarCorrecto(p.data.mensaje),a.value.splice(n,1)}catch(p){t.notificarError(p.response.data.mensaje)}}return l(),{listado:a,obtenerListado:l,mensaje:e,nuevoMensaje:f,configuracionColumnas:B,eliminar:i,enviar:c}}});function I(a,e,f,o,t,l){const c=C("essential-table");return E(),y(Q,{padding:""},{default:b(()=>[e[3]||(e[3]=g("div",{class:"text-h6 q-mb-md"},"Notificaciones para los clientes",-1)),e[4]||(e[4]=g("label",{class:"q-mb-sm block"},"Mensaje",-1)),r(N,{modelValue:a.mensaje,"onUpdate:modelValue":e[0]||(e[0]=i=>a.mensaje=i),class:"q-mb-xs",type:"textarea",placeholder:"Escriba su mensaje aqu\xED",autogrow:"",outlined:"",dense:""},null,8,["modelValue"]),r(w,{color:"primary",class:"full-width q-mb-md","no-caps":"",square:"",unelevated:"",onClick:e[1]||(e[1]=i=>a.enviar())},{default:b(()=>[r(q,{name:"bi-send",class:"q-mr-sm",size:"xs"}),e[2]||(e[2]=V(" Enviar a todos los clientes "))]),_:1}),r(c,{configuracionColumnas:a.configuracionColumnas,datos:a.listado,onEliminar:a.eliminar,"permitir-consultar":!1,"permitir-editar":!1,"mostrar-header":!1,"mostrar-footer":!1},null,8,["configuracionColumnas","datos","onEliminar"])]),_:1})}var ee=k(M,[["render",I]]);export{ee as default};
