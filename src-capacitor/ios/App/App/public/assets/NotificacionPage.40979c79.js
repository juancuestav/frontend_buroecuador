var b=Object.defineProperty;var _=(o,t,e)=>t in o?b(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var s=(o,t,e)=>(_(o,typeof t!="symbol"?t+"":t,e),e);import{Q as g}from"./QPage.161283b6.js";import{E as C}from"./EssentialTableTabs.1169a75b.js";import{C as v}from"./ContenedorSimpleMixin.9e6b94a2.js";import{_ as c,d as h,a2 as E,a3 as x,V as N,K as y,X as L,P as S,j as T}from"./index.aea1effc.js";import{T as w}from"./TransacccionSimpleController.d6ace83b.js";import{a as j,u as B}from"./notificaciones.305263b9.js";import{E as I}from"./entidadAuditable.9f5621ba.js";import{a as P}from"./utils.27a4761f.js";import{u as Q}from"./chat.81dbe27b.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import"./QTabs.18a819ba.js";import"./QResizeObserver.5837b731.js";import"./QSelect.2477ae10.js";import"./QChip.f8291af0.js";import"./QItem.287f8ef9.js";import"./QMenu.ef20bc9f.js";import"./position-engine.c19cb930.js";import"./selection.a0a4309d.js";import"./format.8ac60962.js";import"./EssentialTable.a2272a35.js";import"./QTooltip.d74f897f.js";import"./QBadge.66caf36c.js";import"./QToolbarTitle.2f0d394a.js";import"./logo.d1d9b491.js";import"./_commonjsHelpers.80d8c10d.js";import"./EstadosComponent.4d132387.js";import"./utils.508c826c.js";import"./Hidratable.166e9fe1.js";import"./date.0b7cec79.js";const $=[{name:"tiempo",field:"tiempo",label:"Tiempo",align:"left",sortable:!0},{name:"cliente",field:"cliente",label:"Cliente",align:"left",sortable:!0},{name:"correo",field:"correo",label:"Correo",align:"left",sortable:!0},{name:"acciones",field:"acciones",label:"Acciones",align:"left",sortable:!0}];class k extends w{constructor(){super(c.notificaciones)}}class A extends I{constructor(){super();s(this,"tiempo");s(this,"cliente");s(this,"correo");s(this,"acciones");this.tiempo=null,this.cliente=null,this.correo=null,this.acciones=null}}var D=h({components:{EssentialTableTabs:C},setup(){const o=E.getInstance(),t=new v(A,new k),{listado:e}=t.useReferencias(),{cargarVista:l}=t.useComportamiento();j().setQuasar(x());const m=[{label:"Nuevos",value:"nuevos"},{label:"Le\xEDdos",value:"leidos"}];async function r(i){l(async()=>{const a=o.getEndpoint(c.notificaciones_formulario_contacto,{tipo:i}),n=await o.get(a);e.value=[...n.data.results]})}r("nuevos");const p=Q();return{listado:e,configuracionColumnasNotificaciones:$,abrirChat:{titulo:"Leer mensaje",icono:"bi-chat-right-dots",accion:async({entidad:i})=>{const a=o.getEndpoint(c.notificaciones_formulario_contacto)+"/"+i.id,n=await o.get(a);p.setNotificacion(n.data.modelo),p.mostrarChat()}},marcarLeido:{titulo:"Marcar como le\xEDdo",visible:({entidad:i})=>i.estado==="NUEVO",icono:"bi-check",color:"positive",accion:({entidad:i})=>{const{notificarCorrecto:a,confirmar:n}=B();n("\xBFEst\xE1 seguro de que desea marcar \xE9ste mensaje como le\xEDdo?",()=>l(async()=>{const d=o.getEndpoint(c.notificaciones_formulario_contacto)+"/"+i.id,f=await o.put(d,{});e.value.splice(P(e.value,i.id),1),a(f.data.mensaje)}))}},tabOptions:m,obtenerListado:r}}});function O(o,t,e,l,u,m){const r=N("essential-table-tabs");return y(),L(g,{padding:""},{default:S(()=>[T(r,{titulo:"Listado de notificaciones",configuracionColumnas:o.configuracionColumnasNotificaciones,datos:o.listado,"permitir-consultar":!1,"permitir-editar":!1,"permitir-eliminar":!1,accion1:o.abrirChat,accion2:o.marcarLeido,"tab-options":o.tabOptions,"tab-defecto":"nuevos",onTabSeleccionado:o.obtenerListado},null,8,["configuracionColumnas","datos","accion1","accion2","tab-options","onTabSeleccionado"])]),_:1})}var vo=V(D,[["render",O],["__scopeId","data-v-42a6be71"]]);export{vo as default};
