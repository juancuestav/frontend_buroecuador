var b=Object.defineProperty;var _=(o,t,e)=>t in o?b(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var s=(o,t,e)=>(_(o,typeof t!="symbol"?t+"":t,e),e);import{Q as g}from"./QPage.2411b3e2.js";import{E as C}from"./EssentialTableTabs.c77f843c.js";import{C as v}from"./ContenedorSimpleMixin.6f374d2f.js";import{Z as c,d as h,a0 as E,U as x,J as N,V as y,O as L,j as S}from"./index.6072a1b1.js";import{T}from"./TransacccionSimpleController.f4dc3690.js";import{a as w,u as j}from"./notificaciones.fe24470b.js";import{E as B}from"./entidadAuditable.9f5621ba.js";import{a as I}from"./utils.c7760b0c.js";import{u as O}from"./chat.c35c6cbf.js";import{u as Q}from"./use-quasar.52f58024.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import"./QTabs.4b078992.js";import"./QResizeObserver.cd2c994f.js";import"./QSelect.8fa0bc61.js";import"./QChip.2863bbd0.js";import"./QItem.159d8e83.js";import"./QMenu.6c964ac0.js";import"./position-engine.71479b28.js";import"./selection.ec88bd7c.js";import"./format.8ac60962.js";import"./EssentialTable.0effb8dc.js";import"./QTooltip.0b1018fa.js";import"./QBadge.1ab9ad97.js";import"./QToolbarTitle.80dd577d.js";import"./logo.d1d9b491.js";import"./_commonjsHelpers.8402d862.js";import"./EstadosComponent.69881137.js";import"./utils.508c826c.js";import"./StatusEssentialLoading.d6258813.js";import"./Hidratable.166e9fe1.js";import"./date.3330acff.js";const $=[{name:"tiempo",field:"tiempo",label:"Tiempo",align:"left",sortable:!0},{name:"cliente",field:"cliente",label:"Cliente",align:"left",sortable:!0},{name:"correo",field:"correo",label:"Correo",align:"left",sortable:!0},{name:"acciones",field:"acciones",label:"Acciones",align:"left",sortable:!0}];class k extends T{constructor(){super(c.notificaciones)}}class A extends B{constructor(){super();s(this,"tiempo");s(this,"cliente");s(this,"correo");s(this,"acciones");this.tiempo=null,this.cliente=null,this.correo=null,this.acciones=null}}var D=h({components:{EssentialTableTabs:C},setup(){const o=E.getInstance(),t=new v(A,new k),{listado:e}=t.useReferencias(),{cargarVista:l}=t.useComportamiento();w().setQuasar(Q());const m=[{label:"Nuevos",value:"nuevos"},{label:"Le\xEDdos",value:"leidos"}];async function r(i){l(async()=>{const a=o.getEndpoint(c.notificaciones_formulario_contacto,{tipo:i}),n=await o.get(a);e.value=[...n.data.results]})}r("nuevos");const p=O();return{listado:e,configuracionColumnasNotificaciones:$,abrirChat:{titulo:"Leer mensaje",icono:"bi-chat-right-dots",accion:async({entidad:i})=>{const a=o.getEndpoint(c.notificaciones_formulario_contacto)+"/"+i.id,n=await o.get(a);p.setNotificacion(n.data.modelo),p.mostrarChat()}},marcarLeido:{titulo:"Marcar como le\xEDdo",visible:({entidad:i})=>i.estado==="NUEVO",icono:"bi-check",color:"positive",accion:({entidad:i})=>{const{notificarCorrecto:a,confirmar:n}=j();n("\xBFEst\xE1 seguro de que desea marcar \xE9ste mensaje como le\xEDdo?",()=>l(async()=>{const d=o.getEndpoint(c.notificaciones_formulario_contacto)+"/"+i.id,f=await o.put(d,{});e.value.splice(I(e.value,i.id),1),a(f.data.mensaje)}))}},tabOptions:m,obtenerListado:r}}});function P(o,t,e,l,u,m){const r=x("essential-table-tabs");return N(),y(g,{padding:""},{default:L(()=>[S(r,{titulo:"Listado de notificaciones",configuracionColumnas:o.configuracionColumnasNotificaciones,datos:o.listado,"permitir-consultar":!1,"permitir-editar":!1,"permitir-eliminar":!1,accion1:o.abrirChat,accion2:o.marcarLeido,"tab-options":o.tabOptions,"tab-defecto":"nuevos",onTabSeleccionado:o.obtenerListado},null,8,["configuracionColumnas","datos","accion1","accion2","tab-options","onTabSeleccionado"])]),_:1})}var Eo=V(D,[["render",P],["__scopeId","data-v-42a6be71"]]);export{Eo as default};
