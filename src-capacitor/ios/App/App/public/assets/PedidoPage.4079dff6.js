var A=Object.defineProperty;var E=(e,o,t)=>o in e?A(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var s=(e,o,t)=>(E(e,typeof o!="symbol"?o+"":o,t),t);import{Z as V,d as D,c as B,b$ as F,U as S,J as d,V as m,O as v,L as i,j as l,P as p,N as n,M as a,Q as g,K as j,a2 as C,S as h}from"./index.6072a1b1.js";import{C as N}from"./ContenedorSimpleMixin.6f374d2f.js";import{u as T}from"./notificaciones.fe24470b.js";import{T as I}from"./TabLayout.6a412dfb.js";import{T as O}from"./TransacccionSimpleController.f4dc3690.js";import{E as x}from"./entidadAuditable.9f5621ba.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./utils.c7760b0c.js";import"./date.3330acff.js";import"./format.8ac60962.js";import"./StatusEssentialLoading.d6258813.js";import"./use-quasar.52f58024.js";import"./QTabs.4b078992.js";import"./QResizeObserver.cd2c994f.js";import"./QSelect.8fa0bc61.js";import"./QChip.2863bbd0.js";import"./QItem.159d8e83.js";import"./QMenu.6c964ac0.js";import"./position-engine.71479b28.js";import"./selection.ec88bd7c.js";import"./QTabPanels.2a304c71.js";import"./touch.9135741d.js";import"./use-render-cache.3aae9b27.js";import"./QPage.2411b3e2.js";import"./buttonSubmits.178f5d81.js";import"./EssentialTable.0effb8dc.js";import"./QTooltip.0b1018fa.js";import"./QBadge.1ab9ad97.js";import"./QToolbarTitle.80dd577d.js";import"./logo.d1d9b491.js";import"./_commonjsHelpers.8402d862.js";import"./EstadosComponent.69881137.js";import"./utils.508c826c.js";import"./Hidratable.166e9fe1.js";const Q=[{name:"fecha_emision",field:"fecha_emision",label:"Fecha de emisi\xF3n",align:"left",sortable:!0},{name:"cliente",field:"cliente",label:"Cliente",align:"left",sortable:!0},{name:"estado_pago",field:"estado_pago",label:"Estado del pago",align:"left",sortable:!0}];class z extends O{constructor(){super(V.pedidos)}}class L extends x{constructor(){super();s(this,"pedido");s(this,"cliente");s(this,"fecha_emision");s(this,"estado_pago");s(this,"subtotal");s(this,"total");s(this,"servicio");s(this,"pago_cliente");s(this,"metodo_pago");s(this,"iva");s(this,"lineas_pedido");s(this,"comentario");s(this,"deposito_transferencia");s(this,"tiene_reporte");s(this,"conoce_puntaje");s(this,"tiene_deudas");s(this,"es_cliente");this.pedido=null,this.cliente=null,this.fecha_emision=null,this.estado_pago=null,this.subtotal=0,this.total=0,this.pago_cliente=0,this.metodo_pago=null,this.servicio=null,this.iva=0,this.lineas_pedido=[],this.comentario=null,this.deposito_transferencia=null,this.tiene_reporte=null,this.conoce_puntaje=null,this.tiene_deudas=null,this.es_cliente=null}}var U=D({components:{TabLayout:I},setup(){const e=new z,o=new N(L,e),{entidad:t,listado:P}=o.useReferencias(),{confirmar:y,notificarCorrecto:k}=T(),{eliminar:_}=o.useComportamiento();async function u(){c()}function c(){y(`Esta operaci\xF3n no es reversible.
\xBFDesea continuar?`,async()=>{const{response:r,result:f}=await e.editar(t);k(r.data.mensaje),console.log(r),t.hydrate(f)})}const b=B(()=>t.id!==null);return{mixin:o,pedido:t,registrarPago:u,configuracionColumnasPedidos:Q,mostrarFormulario:b,eliminar:_,listado:P,estadosPago:F}}});const M={class:"row q-col-gutter-xs q-mb-md"},R={class:"col-12 col-md-4 q-mb-md"},J={class:"row q-col-gutter-xs q-mb-md"},K={class:"col-12 col-md-4 q-mb-md"},Z={class:"col-12 col-md-4 q-mb-md"},H={class:"col-12 col-md-4 q-mb-md"},W={class:"col-12 col-md-4 q-mb-md"},X={class:"row q-mb-lg"},Y={class:"col-12"},oo={class:"text-bold q-mb-xl"},eo={key:1,class:"bi-check-circle"},io={class:"row justify-end q-mb-xl"},so={class:"column q-gutter-xs q-mb-4"},to={class:"mb-2"},lo={class:"mb-2"},ao={class:"mb-4"},no={class:"mb-2"},ro={class:"row q-gutter-xs justify-end q-mb-md"};function mo(e,o,t,P,y,k){const _=S("tab-layout");return d(),m(_,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnasPedidos,"titulo-pagina":"Pedidos de servicios",mostrarButtonSubmits:!1,permitirEditar:!1,permitirEliminar:!1,"mostrar-formulario":e.mostrarFormulario},{formulario:v(()=>{var u,c,b,r,f,$,w;return[o[15]||(o[15]=i("div",{class:"text-bold q-mb-md"},"Datos del pedido",-1)),i("div",M,[i("div",R,[o[3]||(o[3]=i("label",{class:"block q-mb-sm"},"Fecha emisi\xF3n",-1)),l(p,{modelValue:e.pedido.fecha_emision,"onUpdate:modelValue":o[0]||(o[0]=q=>e.pedido.fecha_emision=q),outlined:"",dense:"",disable:""},null,8,["modelValue"])])]),o[16]||(o[16]=i("div",{class:"text-bold q-mb-md"},"Datos del cliente",-1)),i("div",J,[i("div",K,[o[4]||(o[4]=i("label",{class:"block q-mb-sm"},"Cliente",-1)),l(p,{"model-value":`${(u=e.pedido.cliente)==null?void 0:u.nombre} ${(c=e.pedido.cliente)==null?void 0:c.apellidos}`,outlined:"",dense:"",disable:""},null,8,["model-value"])]),i("div",Z,[o[5]||(o[5]=i("label",{class:"block q-mb-sm"},"Identificaci\xF3n",-1)),l(p,{"model-value":(b=e.pedido.cliente)==null?void 0:b.identificacion,outlined:"",dense:"",disable:""},null,8,["model-value"])]),i("div",H,[o[6]||(o[6]=i("label",{class:"block q-mb-sm"},"Correo",-1)),l(p,{"model-value":(r=e.pedido.cliente)==null?void 0:r.correo,outlined:"",dense:"",disable:""},null,8,["model-value"])]),i("div",W,[o[7]||(o[7]=i("label",{class:"block q-mb-sm"},"Celular",-1)),l(p,{"model-value":(f=e.pedido.cliente)==null?void 0:f.celular,outlined:"",dense:"",disable:""},null,8,["model-value"])])]),o[17]||(o[17]=i("div",{class:"text-bold q-mb-md"},"Servicio adquirido",-1)),i("div",X,[i("div",Y,n(e.pedido.servicio),1)]),i("div",oo,[a(n((($=e.pedido.estado_pago)==null?void 0:$.charAt(0).toUpperCase())+((w=e.pedido.estado_pago)==null?void 0:w.slice(1).toLowerCase()))+" ",1),e.pedido.estado_pago==="PAGADO"?(d(),m(g,{key:0,name:"bi-check-circle-fill",color:"positive"})):(d(),j("i",eo))]),i("div",io,[i("div",so,[i("div",to,[o[8]||(o[8]=i("label",{class:"form-label me-2"},"IVA (incluido):",-1)),a(" $ "+n(e.pedido.iva),1)]),i("div",lo,[o[9]||(o[9]=i("label",{class:"form-label me-2"},"Subtotal:",-1)),a(" $ "+n(e.pedido.subtotal),1)]),i("div",ao,[o[10]||(o[10]=i("label",{class:"form-label me-2"},"Total:",-1)),a(" $ "+n(e.pedido.total),1)]),i("div",no,[o[11]||(o[11]=i("label",{class:"form-label me-2"},"Pagado por el cliente:",-1)),a(" $ "+n(e.pedido.pago_cliente),1)])])]),i("div",ro,[e.pedido.estado_pago==="PAGADO"?(d(),m(C,{key:0,color:"primary",type:"a",target:"_self",href:`https://burodecredito.ec/api/pedidos/download-pdf/${e.pedido.id}`,"no-caps":""},{default:v(()=>[l(g,{name:"bi-printer",class:"q-mr-sm",size:"xs"}),o[12]||(o[12]=a("Imprimir comprobante "))]),_:1},8,["href"])):h("",!0),e.pedido.estado_pago!=="PAGADO"?(d(),m(C,{key:1,color:"positive",onClick:o[1]||(o[1]=q=>e.registrarPago()),"no-caps":"",push:""},{default:v(()=>[l(g,{name:"bi-cash-coin",class:"q-mr-sm",size:"xs"}),o[13]||(o[13]=a("Registrar pago "))]),_:1})):h("",!0),e.pedido.estado_pago!=="PAGADO"?(d(),m(C,{key:2,color:"negative",onClick:o[2]||(o[2]=q=>e.eliminar(e.pedido)),"no-caps":"",push:""},{default:v(()=>[l(g,{name:"bi-trash",class:"q-mr-sm",size:"xs"}),o[14]||(o[14]=a("Eliminar pedido "))]),_:1})):h("",!0)])]}),_:1},8,["mixin","configuracionColumnas","mostrar-formulario"])}var Ro=G(U,[["render",mo]]);export{Ro as default};
