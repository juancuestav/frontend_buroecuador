var U=Object.defineProperty;var W=(e,a,i)=>a in e?U(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i;var t=(e,a,i)=>(W(e,typeof a!="symbol"?a+"":a,i),i);import{I as X,r as m,c as u,l as M,i as O,aV as G,bR as L,h,a5 as N,Q as x,an as T,g as w,u as Y,v as J,b3 as Z,z as ee,aM as te,E as Q,m as I,n as ae,d as ie,a2 as oe,_ as ne,V as se,K as $,X as E,P as R,M as re,j as y,N as k,U as P}from"./index.aea1effc.js";import{Q as le}from"./QPage.161283b6.js";import{A as ce,I as ue,a as de,b as fe,c as me,d as _e,e as pe,f as he,T as ve,g as be,R as ge,h as Ce,i as ye,j as Se,k as Re,l as xe,m as $e,n as Ee,o as ke,p as qe,q as Pe}from"./ReportePreview.acadff26.js";import{C as Ae}from"./ContadorComponent.a40a70d1.js";import{h as Ie}from"./EssentialTable.a2272a35.js";import{u as Fe}from"./notificaciones.305263b9.js";import{o as V}from"./utils.27a4761f.js";import{E as Me}from"./entidadAuditable.9f5621ba.js";import{_ as we}from"./plugin-vue_export-helper.21dcd24c.js";class j extends Me{constructor(){super();t(this,"tipo_reporte");t(this,"identificacion_cliente");t(this,"nombres_cliente");t(this,"razon_social");t(this,"edad_cliente");t(this,"celular_cliente");t(this,"correo_cliente");t(this,"direccion_cliente");t(this,"ruc_cliente");t(this,"tipo_contribuyente");t(this,"clase_contribuyente");t(this,"fecha_inicio_actividades");t(this,"fecha_actualizaci\xF3n");t(this,"fecha_cese_actividades");t(this,"fecha_reinicio_actividades");t(this,"cuota_mensual");t(this,"usuario");t(this,"historial_crediticio_desde");t(this,"tiene_consultas");t(this,"tiene_informacion_laboral");t(this,"tiene_historial");t(this,"tiene_establecimientos");t(this,"tiene_resumen");t(this,"tiene_puntuaciones");t(this,"tiene_resumen_morosidades");t(this,"tiene_operaciones_credito_bancarias");t(this,"tiene_operaciones_credito_comerciales");t(this,"tiene_cuota_mensual");t(this,"tiene_resumen_vencimientos");t(this,"tiene_saldos_por_vencer");t(this,"tiene_operaciones_canceladas");t(this,"tiene_informacion_seguros");t(this,"tiene_ruc");t(this,"ruc_empleador");t(this,"tipo_empresa");t(this,"nombre_empresa");t(this,"codigo_sucursal");t(this,"telefono_sucursal");t(this,"direccion_sucursal");t(this,"fax_sucursal");t(this,"direccion_afiliado");t(this,"telefono_afiliado");t(this,"ocupacion_afiliado");t(this,"celular_afiliado");t(this,"email_afiliado");t(this,"salario_afiliado");t(this,"fecha_ingreso");t(this,"fecha_salida");t(this,"ubicacion_empresa");t(this,"saldo_impagos");t(this,"total_impagos");t(this,"saldo_demanda_judicial");t(this,"total_demanda_judicial");t(this,"saldo_cartera_castigada");t(this,"total_cartera_castigada");t(this,"estado_contribuyente");t(this,"obligado_llevar_contabilidad");t(this,"beneficiado_333");t(this,"actividadesEconomicas");t(this,"operacionesCreditoBancarias");t(this,"operacionesCreditoComerciales");t(this,"saldosPorVencer");t(this,"establecimientos");t(this,"historialCrediticio");t(this,"consultasCliente");t(this,"morosidades");t(this,"vencimientos");t(this,"operacionesCanceladas");t(this,"seguros");t(this,"score_crediticio");t(this,"score_sobreendeudamiento");this.tipo_reporte="NORMAL",this.identificacion_cliente=null,this.nombres_cliente=null,this.razon_social=null,this.edad_cliente=0,this.celular_cliente=null,this.correo_cliente=null,this.direccion_cliente=null,this.ruc_cliente=null,this.tipo_contribuyente=null,this.clase_contribuyente=null,this.fecha_inicio_actividades=null,this.fecha_actualizaci\u00F3n=null,this.fecha_cese_actividades=null,this.fecha_reinicio_actividades=null,this.tiene_consultas=!1,this.tiene_informacion_laboral=!1,this.tiene_historial=!1,this.tiene_establecimientos=!1,this.tiene_resumen=!1,this.tiene_puntuaciones=!1,this.tiene_resumen_morosidades=!1,this.tiene_operaciones_credito_bancarias=!1,this.tiene_operaciones_credito_comerciales=!1,this.tiene_cuota_mensual=!1,this.tiene_resumen_vencimientos=!1,this.tiene_saldos_por_vencer=!1,this.tiene_operaciones_canceladas=!1,this.tiene_informacion_seguros=!1,this.tiene_ruc=!1,this.cuota_mensual=0,this.usuario=null,this.historial_crediticio_desde=null,this.ruc_empleador=null,this.tipo_empresa=null,this.nombre_empresa=null,this.codigo_sucursal=null,this.telefono_sucursal=null,this.direccion_sucursal=null,this.fax_sucursal=null,this.direccion_afiliado=null,this.telefono_afiliado=null,this.ocupacion_afiliado=null,this.celular_afiliado=null,this.email_afiliado=null,this.salario_afiliado=null,this.fecha_ingreso=null,this.fecha_salida=null,this.ubicacion_empresa=null,this.saldo_impagos=0,this.total_impagos=0,this.saldo_demanda_judicial=0,this.total_demanda_judicial=0,this.saldo_cartera_castigada=0,this.total_cartera_castigada=0,this.estado_contribuyente=!1,this.obligado_llevar_contabilidad=!1,this.beneficiado_333=!1,this.actividadesEconomicas=[new ce],this.establecimientos=[],this.operacionesCreditoBancarias=[],this.operacionesCreditoComerciales=[],this.saldosPorVencer=[new ue],this.operacionesCanceladas=[new de],this.historialCrediticio=this.inicializarHistorialCrediticio(),this.consultasCliente=this.inicializarConsultasCliente(),this.morosidades=this.inicializarResumenMorosidades(),this.vencimientos=this.inicializarResumenVencimientos(),this.seguros=this.inicializarInformacionSeguros(),this.score_crediticio=0,this.score_sobreendeudamiento=0}inicializarHistorialCrediticio(){const i=[];return V(36).forEach(s=>{const l=new fe;l.mes=s,i.push(l)}),i}inicializarConsultasCliente(){const i=[];return V(12).forEach(s=>{const l=new me;l.mes=s,i.push(l)}),i}inicializarResumenMorosidades(){const i=[];return["Sistema Financiero Regulado SB","Entidades Reguladas SEPS","Sector Comercial (INFOCOM)","Total"].forEach(r=>{const s=new _e;s.acreedor=r,i.push(s)}),i}inicializarResumenVencimientos(){const i=[];return["Marcimex - telf: 072831991","Marcimex - telf: 072831991","ALFANET - telf: 023731070","Total"].forEach(r=>{const s=new pe;s.acreedor=r,i.push(s)}),i}inicializarInformacionSeguros(){const i=[];return["IESS","ISSFA","ISSPOL"].forEach(r=>{const s=new he;s.seguro=r,i.push(s)}),i}}const ze=X("reporte",()=>{const e=m(!0),a=m(!0),i=m(!0),n=m(new j),r=m(),s=m([]),l=m(),c=m("ConsultarReporte");function b(){e.value=!0}function g(){e.value=!1}function C(){c.value="FormularioReporte"}function o(){c.value="ConsultarReporte"}function _(){c.value="ReportePDF"}function p(d){n.value=d}function v(d){s.value=d}function f(){n.value=new j}function S(){a.value=!0}function A(){a.value=!1}return{idReporteActual:r,mostrarFormulario:b,verConsultarReporte:i,verMiReporte:a,formularioConsultarReporte:c,reporte:n,reportesConsultados:s,cliente:l,resetReporte:f,verFormulario:e,mostrarReportePDF:g,mostrarReportePDFConsultar:_,mostrarConsultarReporte:o,mostrarEditarReporteConsultar:C,setReporte:p,setReportesConsultados:v,mostrarFormularioMiReporte:S,mostrarReportePDFMiReporte:A}}),Be=["top","right","bottom","left"],F={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Be.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function H(e,a){return{formClass:u(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:u(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:u(()=>{if(e.externalLabel===!0){const i=e.hideLabel===null?a.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(i===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const K={start:"self-end",center:"self-center",end:"self-start"},De=Object.keys(K);var q=M({name:"QFabAction",props:{...F,icon:{type:String,default:""},anchor:{type:String,validator:e=>De.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:a,emit:i}){const n=O(L,()=>({showing:{value:!0},onChildClick:G})),{formClass:r,labelProps:s}=H(e,n.showing),l=u(()=>{const o=K[e.anchor];return r.value+(o!==void 0?` ${o}`:"")}),c=u(()=>e.disable===!0||n.showing.value!==!0);function b(o){n.onChildClick(o),i("click",o)}function g(){const o=[];return a.icon!==void 0?o.push(a.icon()):e.icon!==""&&o.push(h(x,{name:e.icon})),(e.label!==""||a.label!==void 0)&&o[s.value.action](h("div",s.value.data,a.label!==void 0?a.label():[e.label])),T(a.default,o)}const C=w();return Object.assign(C.proxy,{click:b}),()=>h(N,{class:l.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:c.value,onClick:b},g)}});const Ve=["up","right","down","left"],je=["left","center","right"];var Oe=M({name:"QFab",props:{...F,...Y,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...F.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>Ve.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>je.includes(e)}},emits:J,setup(e,{slots:a}){const i=m(null),n=m(e.modelValue===!0),r=Z(),{proxy:{$q:s}}=w(),{formClass:l,labelProps:c}=H(e,n),b=u(()=>e.persistent!==!0),{hide:g,toggle:C}=ee({showing:n,hideOnRouteChange:b}),o=u(()=>({opened:n.value})),_=u(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${l.value}`+(n.value===!0?" q-fab--opened":" q-fab--closed")),p=u(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${n.value===!0?"opened":"closed"}`),v=u(()=>{const d={id:r.value,role:"menu"};return n.value!==!0&&(d["aria-hidden"]="true"),d}),f=u(()=>`q-fab__icon-holder  q-fab__icon-holder--${n.value===!0?"opened":"closed"}`);function S(d,z){const B=a[d],D=`q-fab__${d} absolute-full`;return B===void 0?h(x,{class:D,name:e[z]||s.iconSet.fab[z]}):h("div",{class:D},B(o.value))}function A(){const d=[];return e.hideIcon!==!0&&d.push(h("div",{class:f.value},[S("icon","icon"),S("active-icon","activeIcon")])),(e.label!==""||a.label!==void 0)&&d[c.value.action](h("div",c.value.data,a.label!==void 0?a.label(o.value):[e.label])),T(a.tooltip,d)}return te(L,{showing:n,onChildClick(d){g(d),i.value!==null&&i.value.$el.focus()}}),()=>h("div",{class:_.value},[h(N,{ref:i,class:l.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":r.value,onClick:C},A),h("div",{class:p.value,...v.value},Q(a.default))])}});const Le={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Ne(){const{props:e,proxy:{$q:a}}=w(),i=O(ae,I);if(i===I)return console.error("QPageSticky needs to be child of QLayout"),I;const n=u(()=>{const o=e.position;return{top:o.indexOf("top")!==-1,right:o.indexOf("right")!==-1,bottom:o.indexOf("bottom")!==-1,left:o.indexOf("left")!==-1,vertical:o==="top"||o==="bottom",horizontal:o==="left"||o==="right"}}),r=u(()=>i.header.offset),s=u(()=>i.right.offset),l=u(()=>i.footer.offset),c=u(()=>i.left.offset),b=u(()=>{let o=0,_=0;const p=n.value,v=a.lang.rtl===!0?-1:1;p.top===!0&&r.value!==0?_=`${r.value}px`:p.bottom===!0&&l.value!==0&&(_=`${-l.value}px`),p.left===!0&&c.value!==0?o=`${v*c.value}px`:p.right===!0&&s.value!==0&&(o=`${-v*s.value}px`);const f={transform:`translate(${o}, ${_})`};return e.offset&&(f.margin=`${e.offset[1]}px ${e.offset[0]}px`),p.vertical===!0?(c.value!==0&&(f[a.lang.rtl===!0?"right":"left"]=`${c.value}px`),s.value!==0&&(f[a.lang.rtl===!0?"left":"right"]=`${s.value}px`)):p.horizontal===!0&&(r.value!==0&&(f.top=`${r.value}px`),l.value!==0&&(f.bottom=`${l.value}px`)),f}),g=u(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function C(o){const _=Q(o.default);return h("div",{class:g.value,style:b.value},e.expand===!0?_:[h("div",_)])}return{$layout:i,getStickyContent:C}}var Te=M({name:"QPageSticky",props:Le,setup(e,{slots:a}){const{getStickyContent:i}=Ne();return()=>i(a)}}),Qe=ie({props:{permitirEditar:{type:Boolean,default:!1},consultarReporte:{type:Boolean,default:!1}},components:{TableView:ve,TableViewHistorialCrediticio:be,Contador:Ae,ReportePreview:ge},setup(){const e=ze(),a=u(()=>e.reporte),i=m(),n=m(),r=u(()=>n.value?n.value.length:0),s=new Date().toLocaleDateString();function l(){e.mostrarFormulario()}function c(){e.mostrarEditarReporteConsultar()}function b(){e.mostrarFormularioMiReporte()}const g=m();function C(){const v=g.value;Ie().set({margin:0,filename:"reporte.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:3,letterRendering:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}}).from(v).save().catch(f=>console.log(f))}const{notificarCorrecto:o,notificarError:_}=Fe();async function p(){const v=oe.getInstance(),f=v.getEndpoint(ne.reportes);try{const S=await v.post(f,{reporte:a.value});o(S.data.mensaje)}catch(S){_(S.response.data.mensaje)}}return{refPDF:g,reporte:a,fechaActual:s,guardar:p,totalEstablecimientos:r,volver:l,imprimir:C,mostrarEditarReporte:c,volverMisReportes:b,configuracionColumnasActividades:Ce,configuracionColumnasEstablecimientos:ye,configuracionColumnasOperacionesCredito:Se,configuracionColumnasHistorialCrediticio:Re,configuracionColumnasConsultasCliente:xe,configuracionColumnasMorosidades:$e,configuracionColumnasVencimientos:Ee,configuracionColumnasSaldosPorVencer:ke,configuracionColumnasOperacionesCanceladas:qe,configuracionColumnasSeguros:Pe,actividadesEconomicas:i,establecimientos:n}}});const He={ref:"refPDF"};function Ke(e,a,i,n,r,s){const l=se("reporte-preview");return $(),E(le,{padding:""},{default:R(()=>[re("div",He,[y(l,{reporte:e.reporte},null,8,["reporte"])],512),y(Te,{position:"bottom-right",offset:[18,e.$q.screen.xs?50:28]},{default:R(()=>[y(Oe,{icon:"add",direction:"up","vertical-actions-align":"right",color:"primary",label:"Acciones",padding:"sm lg"},{default:R(()=>[e.permitirEditar&&!e.consultarReporte?($(),E(q,{key:0,color:"secondary",onClick:a[0]||(a[0]=c=>e.mostrarEditarReporte()),padding:"sm md"},{default:R(()=>[y(x,{name:"bi-chevron-left",size:"xs",class:"q-mr-sm"}),a[5]||(a[5]=k("Continuar editando "))]),_:1})):P("",!0),!e.permitirEditar&&!e.consultarReporte?($(),E(q,{key:1,color:"secondary",onClick:a[1]||(a[1]=c=>e.volver()),padding:"sm md"},{default:R(()=>[y(x,{name:"bi-chevron-left",size:"xs",class:"q-mr-sm"}),a[6]||(a[6]=k("Continuar editando "))]),_:1})):P("",!0),y(q,{color:"secondary",onClick:a[2]||(a[2]=c=>e.imprimir()),padding:"sm xl"},{default:R(()=>[y(x,{name:"bi-printer",size:"xs",class:"q-mr-sm"}),a[7]||(a[7]=k("Imprimir"))]),_:1}),!e.permitirEditar&&!e.consultarReporte?($(),E(q,{key:2,color:"secondary",onClick:a[3]||(a[3]=c=>e.guardar()),padding:"sm md"},{default:R(()=>[y(x,{name:"bi-save",size:"xs",class:"q-mr-sm"}),a[8]||(a[8]=k("Guardar "))]),_:1})):P("",!0),e.consultarReporte?($(),E(q,{key:3,color:"secondary",onClick:a[4]||(a[4]=c=>e.volverMisReportes()),padding:"sm md"},{default:R(()=>[y(x,{name:"bi-chevron-left",size:"xs",class:"q-mr-sm"}),a[9]||(a[9]=k("Volver a Mis reportes "))]),_:1})):P("",!0)]),_:1})]),_:1},8,["offset"])]),_:1})}var it=we(Qe,[["render",Ke],["__scopeId","data-v-49643c30"]]);export{Te as Q,it as R,Oe as a,q as b,ze as u};
