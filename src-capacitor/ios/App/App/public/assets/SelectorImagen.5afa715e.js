import{r as h,c as v,g as X,aY as ne,aj as G,aS as oe,h as B,k as ie,b9 as re,ba as se,bb as ue,bc as ce,bd as de,be as me,bf as K,bg as fe,bh as ge,aP as ve,d as H,J as $,V as J,O as E,bi as he,j as w,L as Q,a2 as T,K as P,N as M,S as _,bj as xe,a6 as pe,bk as be,o as ye,w as Se,B as Fe,aN as we,F as Ce,Q as Ve,bl as Z}from"./index.6072a1b1.js";import{Q as ke}from"./QChip.2863bbd0.js";import{h as ze}from"./format.8ac60962.js";import{Q as ee}from"./QImg.351239be.js";import{_ as Ie}from"./plugin-vue_export-helper.21dcd24c.js";function O(e,g,f,x){const o=[];return e.forEach(u=>{x(u)===!0?o.push(u):g.push({failedPropValidation:f,file:u})}),o}function Y(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),G(e)}const je={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},De=["rejected"];function $e({editable:e,dnd:g,getFileInput:f,addFilesToQueue:x}){const{props:o,emit:u,proxy:p}=X(),C=h(null),k=v(()=>o.accept!==void 0?o.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),V=v(()=>parseInt(o.maxFiles,10)),b=v(()=>parseInt(o.maxTotalSize,10));function z(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&ne(t);else{const c=f();c&&c!==t.target&&c.click(t)}}function N(t){e.value&&t&&x(null,t)}function I(t,c,j,i){let a=Array.from(c||t.target.files);const s=[],F=()=>{s.length!==0&&u("rejected",s)};if(o.accept!==void 0&&k.value.indexOf("*/")===-1&&(a=O(a,s,"accept",r=>k.value.some(m=>r.type.toUpperCase().startsWith(m)||r.name.toUpperCase().endsWith(m))),a.length===0))return F();if(o.maxFileSize!==void 0){const r=parseInt(o.maxFileSize,10);if(a=O(a,s,"max-file-size",m=>m.size<=r),a.length===0)return F()}if(o.multiple!==!0&&a.length!==0&&(a=[a[0]]),a.forEach(r=>{r.__key=r.webkitRelativePath+r.lastModified+r.name+r.size}),i===!0){const r=j.map(m=>m.__key);a=O(a,s,"duplicate",m=>r.includes(m.__key)===!1)}if(a.length===0)return F();if(o.maxTotalSize!==void 0){let r=i===!0?j.reduce((m,A)=>m+A.size,0):0;if(a=O(a,s,"max-total-size",m=>(r+=m.size,r<=b.value)),a.length===0)return F()}if(typeof o.filter=="function"){const r=o.filter(a);a=O(a,s,"filter",m=>r.includes(m))}if(o.maxFiles!==void 0){let r=i===!0?j.length:0;if(a=O(a,s,"max-files",()=>(r++,r<=V.value)),a.length===0)return F()}if(F(),a.length!==0)return a}function q(t){Y(t),g.value!==!0&&(g.value=!0)}function l(t){G(t),(t.relatedTarget!==null||oe.is.safari!==!0?t.relatedTarget!==C.value:document.elementsFromPoint(t.clientX,t.clientY).includes(C.value)===!1)===!0&&(g.value=!1)}function d(t){Y(t);const c=t.dataTransfer.files;c.length!==0&&x(null,c),g.value=!1}function y(t){if(g.value===!0)return B("div",{ref:C,class:`q-${t}__dnd absolute-full`,onDragenter:Y,onDragover:Y,onDragleave:l,onDrop:d})}return Object.assign(p,{pickFiles:z,addFiles:N}),{pickFiles:z,addFiles:N,onDragover:q,onDragleave:l,processFiles:I,getDndNode:y,maxFilesNumber:V,maxTotalSizeNumber:b}}var Ne=ie({name:"QFile",inheritAttrs:!1,props:{...re,...se,...je,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ue,...De],setup(e,{slots:g,emit:f,attrs:x}){const{proxy:o}=X(),u=ce(),p=h(null),C=h(!1),k=de(e),{pickFiles:V,onDragover:b,onDragleave:z,processFiles:N,getDndNode:I}=$e({editable:u.editable,dnd:C,getFileInput:R,addFilesToQueue:L}),q=me(e),l=v(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),d=v(()=>K(l.value)),y=v(()=>l.value.map(n=>n.name).join(", ")),t=v(()=>ze(l.value.reduce((n,S)=>n+S.size,0))),c=v(()=>({totalSize:t.value,filesNumber:l.value.length,maxFiles:e.maxFiles})),j=v(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:k.value,...x,id:u.targetUid.value,disabled:u.editable.value!==!0})),i=v(()=>"q-file q-field--auto-height"+(C.value===!0?" q-file--dnd":"")),a=v(()=>e.multiple===!0&&e.append===!0);function s(n){const S=l.value.slice();S.splice(n,1),r(S)}function F(n){const S=l.value.indexOf(n);S!==-1&&s(S)}function r(n){f("update:modelValue",e.multiple===!0?n:n[0])}function m(n){n.keyCode===13&&ve(n)}function A(n){(n.keyCode===13||n.keyCode===32)&&V(n)}function R(){return p.value}function L(n,S){const D=N(n,S,l.value,a.value),W=R();W!=null&&(W.value=""),D!==void 0&&((e.multiple===!0?e.modelValue&&D.every(le=>l.value.includes(le)):e.modelValue===D[0])||r(a.value===!0?l.value.concat(D):D))}function U(){return[B("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function te(){if(g.file!==void 0)return l.value.length===0?U():l.value.map((S,D)=>g.file({index:D,file:S,ref:this}));if(g.selected!==void 0)return l.value.length===0?U():g.selected({files:l.value,ref:this});if(e.useChips===!0)return l.value.length===0?U():l.value.map((S,D)=>B(ke,{key:"file-"+D,removable:u.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{s(D)}},()=>B("span",{class:"ellipsis",textContent:S.name})));const n=e.displayValue!==void 0?e.displayValue:y.value;return n.length!==0?[B("div",{class:e.inputClass,style:e.inputStyle,textContent:n})]:U()}function ae(){const n={ref:p,...j.value,...q.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:L};return e.multiple===!0&&(n.multiple=!0),B("input",n)}return Object.assign(u,{fieldClass:i,emitValue:r,hasValue:d,inputRef:p,innerValue:l,floatingLabel:v(()=>d.value===!0||K(e.displayValue)),computedCounter:v(()=>{if(e.counterLabel!==void 0)return e.counterLabel(c.value);const n=e.maxFiles;return`${l.value.length}${n!==void 0?" / "+n:""} (${t.value})`}),getControlChild:()=>I("file"),getControl:()=>{const n={ref:u.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return u.editable.value===!0&&Object.assign(n,{onDragover:b,onDragleave:z,onKeydown:m,onKeyup:A}),B("div",n,[ae()].concat(te()))}}),Object.assign(o,{removeAtIndex:s,removeFile:F,getNativeElement:()=>p.value}),fe(o,"nativeEl",()=>p.value),ge(u)}});const qe={class:"row q-gutter-sm q-pb-sm justify-center closeButton bg-grey-10 full-width"},Ae={class:"col-12 text-center"},Be={class:"row col-12 q-col-gutter-x-sm q-px-lg text-white"},Pe={key:0,class:"col-12 col-md-3 text-h6"},_e={key:1,class:"col-12 col-md-3 text-h6"},Oe={key:2,class:"col-12 col-md-3 text-h6"},Te={key:3,class:"col-12 col-md-3 text-h6"},Qe={key:4,class:"col-12 col-md-3 text-h6"},Me=H({__name:"VisorImagen",props:{texto1:String,texto2:String,texto3:String,texto4:String,texto5:String},setup(e,{expose:g}){const f=h(1),x=h({x:0,y:0}),o=h(!1),u=h({x:0,y:0}),p=h({x:0,y:0}),C=h(null),k=i=>{i.deltaY<0?f.value+=.1:f.value=Math.max(1,f.value-.1)},V=i=>{o.value=!0,u.value={x:i.type.includes("touch")?i.touches[0].pageX:i.pageX,y:i.type.includes("touch")?i.touches[0].pageY:i.pageY},p.value={...x.value}},b=i=>{if(!o.value)return;const a=i.type.includes("touch")?i.touches[0].pageX:i.pageX,s=i.type.includes("touch")?i.touches[0].pageY:i.pageY;x.value={x:p.value.x+(a-u.value.x),y:p.value.y+(s-u.value.y)}},z=()=>{o.value=!1},N=v(()=>({transform:`translate(${x.value.x}px, ${x.value.y}px) scale(${f.value}) rotate(${l.value}deg)`,transition:o.value?"none":"transform 0.3s ease",cursor:o.value?"grabbing":"grab"})),I=h(!1),q=h(),l=h(0);function d(i){I.value=!0,q.value=i}function y(){console.log(l.value),l.value+=90}const t=()=>{f.value=Math.min(f.value+.2,5)},c=()=>{f.value=Math.max(f.value-.2,1)},j=()=>{f.value=1,x.value={x:0,y:0},l.value=0};return g({abrir:d}),(i,a)=>($(),J(he,{modelValue:I.value,"onUpdate:modelValue":a[5]||(a[5]=s=>I.value=s),maximized:""},{default:E(()=>[w(be,{class:"bg-black rounded-card no-border",flat:""},{default:E(()=>[Q("div",qe,[Q("div",Ae,[w(T,{color:"white",flat:"",label:"Girar","no-caps":"",icon:"bi-arrow-clockwise",onClick:a[0]||(a[0]=s=>y())}),w(T,{label:"Alejar","no-caps":"",dense:"",color:"white",flat:"",icon:"bi-dash",onClick:a[1]||(a[1]=s=>c())}),w(T,{label:"Acercar","no-caps":"",dense:"",flat:"",color:"white",icon:"bi-plus",onClick:a[2]||(a[2]=s=>t())}),w(T,{label:"Tama\xF1o Original",icon:"aspect_ratio",flat:"","no-caps":"",color:"white",onClick:a[3]||(a[3]=s=>j())}),w(T,{flat:"",color:"white",icon:"close",onClick:a[4]||(a[4]=()=>I.value=!1)})]),Q("div",Be,[e.texto1?($(),P("div",Pe,M(e.texto1),1)):_("",!0),e.texto2?($(),P("div",_e,M(e.texto2),1)):_("",!0),e.texto3?($(),P("div",Oe,M(e.texto3),1)):_("",!0),e.texto4?($(),P("div",Te,M(e.texto4),1)):_("",!0),e.texto5?($(),P("div",Qe,M(e.texto5),1)):_("",!0)])]),w(xe,{class:"rounded-footer text-center q-pa-none q-overflow-auto image-container",onMousedown:V,onMousemove:b,onMouseup:z,onMouseleave:z,onTouchstart:V,onTouchmove:b,onTouchend:z,ref_key:"container",ref:C},{default:E(()=>[w(ee,{src:q.value,fit:"contain",width:i.$q.screen.xs?"100%":"80%",height:"100vh","spinner-color":"white",style:pe(N.value),onWheel:k,class:"zoomable-image"},null,8,["src","width","style"])]),_:1},512)]),_:1})]),_:1},8,["modelValue"]))}});var Ee=Ie(Me,[["__scopeId","data-v-36e0865c"]]);const Re={class:"bg-desenfoque"},Ue={key:0,class:"block text-center"},Ye=H({__name:"SelectorImagen",props:{modelValue:String,imagen:String,disable:Boolean,file_extensiones:String,error:Boolean,alto:String,hint:String,placeholder:{type:String,default:"Opcional"},texto1:String,texto2:String,texto3:String,texto4:String,texto5:String,mostrarCampo:{type:Boolean,default:!0},comprimir:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e,{emit:g}){const f=e,x=g,o=X(),u=o==null?void 0:o.slots;ye(()=>{C.value=!!(u!=null&&u.error)});const p=h(),C=h(!1),k=h(),V=h(),b=v(()=>f.imagen),z=v(()=>{var l;return(l=f.alto)!=null?l:"160px"}),N=async l=>{if(l!=null){k.value=l.size;const d=new FileReader,y=f.comprimir?await I(l):l;d.readAsDataURL(y),d.onload=()=>x("update:modelValue",d.result),k.value=y.size}else k.value=null};async function I(l){return new Promise(d=>{const y=new FileReader;y.onload=t=>{var j,i;const c=new Image;c.src=((i=(j=t.target)==null?void 0:j.result)==null?void 0:i.toString())||"",c.onload=()=>{const a=document.createElement("canvas"),s=a.getContext("2d"),F=1600;let r=c.width,m=c.height;if(c.width>F){const A=F/c.width;r=F,m=c.height*A}a.width=r,a.height=m,s==null||s.drawImage(c,0,0,r,m),a.toBlob(A=>{if(A){const R=new File([A],l.name,{type:"image/jpeg",lastModified:Date.now()});d(R)}},"image/jpeg",.7)}},y.readAsDataURL(l)})}Se(b,()=>{b.value||(V.value=null)});function q(){x("update:modelValue",null)}return(l,d)=>{var y;return $(),P(Ce,null,[e.mostrarCampo?($(),J(Ne,{key:0,modelValue:V.value,"onUpdate:modelValue":[d[0]||(d[0]=t=>V.value=t),N],dense:"",outlined:"",class:"q-mt-sm",clearable:"",onClear:d[1]||(d[1]=t=>q()),disable:e.disable,accept:".png, .jpg, .jpeg",label:e.placeholder,error:e.error,hint:e.hint},{prepend:E(()=>[w(Ve,{name:"attach_file"})]),error:E(()=>[C.value?Z(l.$slots,"error",{key:0}):Z(l.$slots,"error",{key:1},()=>[d[3]||(d[3]=Q("div",null,[Q("div",{class:"error-msg"},"Imagen requerida")],-1))])]),_:3},8,["modelValue","disable","label","error","hint"])):_("",!0),Q("div",Re,[Fe(w(ee,{src:(y=b.value)!=null?y:"",width:"100%",height:z.value,fit:"contain",class:"border-white"},null,8,["src","height"]),[[we,b.value]]),b.value?($(),P("small",Ue,[w(T,{onClick:d[2]||(d[2]=t=>p.value.abrir(b.value)),label:"Ver en pantalla completa",icon:"bi-eye",class:"text-grey-8 full-width bg-white border-white","no-caps":"","no-wrap":"",square:"",unelevated:""})])):_("",!0)]),w(Ee,{ref_key:"refVisorImagen",ref:p,texto1:e.texto1,texto2:e.texto2,texto3:e.texto3,texto4:e.texto4,texto5:e.texto5},null,8,["texto1","texto2","texto3","texto4","texto5"])],64)}}});var Ge=Ye;export{Ge as S,De as a,$e as b,je as u};
