var $e=Object.defineProperty;var qe=(t,e,o)=>e in t?$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var b=(t,e,o)=>(qe(t,typeof e!="symbol"?e+"":e,o),o);import{aT as Pe,D as ze,h as p,aY as Le,bA as ie,aP as G,a2 as M,Q as Be,k as Oe,q as Ee,v as Ne,bX as He,r as E,c as k,w as Y,o as xe,m as Re,g as Ue,aj as Ae,A as Fe,ax as _e,Z as Ie,bY as je,d as De,bZ as Qe,U as Z,J as T,V as Me,O as L,j as C,L as c,P as x,K as P,X as R,F as U,bI as J,a1 as Ke,N as A}from"./index.6072a1b1.js";import{Q as ee}from"./QSelect.8fa0bc61.js";import{a as Ve,u as We,b as Xe,c as Ge}from"./EssentialTable.0effb8dc.js";import{Q as Ye}from"./QTooltip.0b1018fa.js";import{Q as te,b as Ze}from"./QItem.159d8e83.js";import{Q as Je}from"./QForm.7a1734b3.js";import{r as F}from"./index.d3fb51b6.js";import{u as et}from"./index.1be77ee8.js";import{T as tt}from"./TabLayout.6a412dfb.js";import{S as ot}from"./SelectorImagen.5afa715e.js";import{C as it}from"./ContenedorSimpleMixin.6f374d2f.js";import{C as nt}from"./CategoriaController.c3697c1f.js";import{T as rt}from"./TransacccionSimpleController.f4dc3690.js";import{E as lt}from"./entidadAuditable.9f5621ba.js";import{_ as st}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.2863bbd0.js";import"./QMenu.6c964ac0.js";import"./position-engine.71479b28.js";import"./selection.ec88bd7c.js";import"./format.8ac60962.js";import"./QBadge.1ab9ad97.js";import"./utils.c7760b0c.js";import"./date.3330acff.js";import"./QToolbarTitle.80dd577d.js";import"./logo.d1d9b491.js";import"./_commonjsHelpers.8402d862.js";import"./EstadosComponent.69881137.js";import"./utils.508c826c.js";import"./QTabs.4b078992.js";import"./QResizeObserver.cd2c994f.js";import"./QTabPanels.2a304c71.js";import"./touch.9135741d.js";import"./use-render-cache.3aae9b27.js";import"./QPage.2411b3e2.js";import"./buttonSubmits.178f5d81.js";import"./StatusEssentialLoading.d6258813.js";import"./use-quasar.52f58024.js";import"./QImg.351239be.js";import"./notificaciones.fe24470b.js";import"./Hidratable.166e9fe1.js";function ne(t,e){if(e&&t===e)return null;const o=t.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(o)===!0)return t;const r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,s=r.display;return s==="block"||s==="table"?t:ne(t.parentNode)}function D(t,e,o){return!t||t===document.body?!1:o===!0&&t===e||(e===document?document.body:e).contains(t.parentNode)}function re(t,e,o){if(o||(o=document.createRange(),o.selectNode(t),o.setStart(t,0)),e.count===0)o.setEnd(t,e.count);else if(e.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<e.count?e.count-=t.textContent.length:(o.setEnd(t,e.count),e.count=0);else for(let r=0;e.count!==0&&r<t.childNodes.length;r++)o=re(t.childNodes[r],e,o);return o}const at=/^https?:\/\//;class ut{constructor(e,o){this.el=e,this.eVm=o,this._range=null}get selection(){if(this.el){const e=document.getSelection();if(D(e.anchorNode,this.el,!0)&&D(e.focusNode,this.el,!0))return e}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const e=this.selection;return e!==null&&e.rangeCount?e.getRangeAt(0):this._range}get parent(){const e=this.range;if(e!==null){const o=e.startContainer;return o.nodeType===document.ELEMENT_NODE?o:o.parentNode}return null}get blockParent(){const e=this.parent;return e!==null?ne(e,this.el):null}save(e=this.range){e!==null&&(this._range=e)}restore(e=this._range){const o=document.createRange(),r=document.getSelection();e!==null?(o.setStart(e.startContainer,e.startOffset),o.setEnd(e.endContainer,e.endOffset),r.removeAllRanges(),r.addRange(o)):(r.selectAllChildren(this.el),r.collapseToEnd())}savePosition(){let e=-1,o;const r=document.getSelection(),s=this.el.parentNode;if(r.focusNode&&D(r.focusNode,s))for(o=r.focusNode,e=r.focusOffset;o&&o!==s;)o!==this.el&&o.previousSibling?(o=o.previousSibling,e+=o.textContent.length):o=o.parentNode;this.savedPos=e}restorePosition(e=0){if(this.savedPos>0&&this.savedPos<e){const o=window.getSelection(),r=re(this.el,{count:this.savedPos});r&&(r.collapse(!1),o.removeAllRanges(),o.addRange(r))}}hasParent(e,o){const r=o?this.parent:this.blockParent;return r!==null?r.nodeName.toLowerCase()===e.toLowerCase():!1}hasParents(e,o,r=this.parent){return r===null?!1:e.includes(r.nodeName.toLowerCase())===!0?!0:o===!0?this.hasParents(e,o,r.parentNode):!1}is(e,o){if(this.selection===null)return!1;switch(e){case"formatBlock":return o==="DIV"&&this.parent===this.el||this.hasParent(o,o==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(e)===o;case"fontName":const r=document.queryCommandValue(e);return r===`"${o}"`||r===o;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const s=document.queryCommandState(e);return o!==void 0?s===o:s}}getParentAttribute(e){return this.parent!==null?this.parent.getAttribute(e):null}can(e){if(e==="outdent")return this.hasParents(["blockquote","li"],!0);if(e==="indent")return this.hasParents(["li"],!0);if(e==="link")return this.selection!==null||this.is("link")}apply(e,o,r=Pe){if(e==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(o)&&this.is(e,o)&&(e="outdent",o=null),o==="PRE"&&this.is(e,"PRE")&&(o="P");else if(e==="print"){r();const s=window.open();s.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),s.print(),s.close();return}else if(e==="link"){const s=this.getParentAttribute("href");if(s===null){const m=this.selectWord(this.selection),a=m?m.toString():"";if(!a.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=at.test(a)?a:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(m.getRangeAt(0))}else this.eVm.editLinkUrl.value=s,this.range.selectNodeContents(this.parent),this.save();return}else if(e==="fullscreen"){this.eVm.toggleFullscreen(),r();return}else if(e==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),r();return}document.execCommand(e,!1,o),r()}selectWord(e){if(e===null||e.isCollapsed!==!0||e.modify===void 0)return e;const o=document.createRange();o.setStart(e.anchorNode,e.anchorOffset),o.setEnd(e.focusNode,e.focusOffset);const r=o.collapsed?["backward","forward"]:["forward","backward"];o.detach();const s=e.focusNode,m=e.focusOffset;return e.collapse(e.anchorNode,e.anchorOffset),e.modify("move",r[0],"character"),e.modify("move",r[1],"word"),e.extend(s,m),e.modify("extend",r[1],"character"),e.modify("extend",r[0],"word"),e}}function le(t,e,o){e.handler?e.handler(t,o,o.caret):o.runCmd(e.cmd,e.param)}function K(t){return p("div",{class:"q-editor__toolbar-group"},t)}function se(t,e,o,r=!1){const s=r||(e.type==="toggle"?e.toggled?e.toggled(t):e.cmd&&t.caret.is(e.cmd,e.param):!1),m=[];if(e.tip&&t.$q.platform.is.desktop){const a=e.key?p("div",[p("small",`(CTRL + ${String.fromCharCode(e.key)})`)]):null;m.push(p(Ye,{delay:1e3},()=>[p("div",{innerHTML:e.tip}),a]))}return p(M,{...t.buttonProps.value,icon:e.icon!==null?e.icon:void 0,color:s?e.toggleColor||t.props.toolbarToggleColor:e.color||t.props.toolbarColor,textColor:s&&!t.props.toolbarPush?null:e.textColor||t.props.toolbarTextColor,label:e.label,disable:e.disable?typeof e.disable=="function"?e.disable(t):!0:!1,size:"sm",onClick(a){o&&o(),le(a,e,t)}},()=>m)}function dt(t,e){const o=e.list==="only-icons";let r=e.label,s=e.icon!==null?e.icon:void 0,m,a;function f(){y.component.proxy.hide()}if(o)a=e.options.map(u=>{const w=u.type===void 0?t.caret.is(u.cmd,u.param):!1;return w&&(r=u.tip,s=u.icon!==null?u.icon:void 0),se(t,u,f,w)}),m=t.toolbarBackgroundClass.value,a=[K(a)];else{const u=t.props.toolbarToggleColor!==void 0?`text-${t.props.toolbarToggleColor}`:null,w=t.props.toolbarTextColor!==void 0?`text-${t.props.toolbarTextColor}`:null,z=e.list==="no-icons";a=e.options.map(g=>{const N=g.disable?g.disable(t):!1,$=g.type===void 0?t.caret.is(g.cmd,g.param):!1;$&&(r=g.tip,s=g.icon!==null?g.icon:void 0);const B=g.htmlTip;return p(Ze,{active:$,activeClass:u,clickable:!0,disable:N,dense:!0,onClick(O){f(),t.contentRef.value!==null&&t.contentRef.value.focus(),t.caret.restore(),le(O,g,t)}},()=>[z===!0?null:p(te,{class:$?u:w,side:!0},()=>p(Be,{name:g.icon!==null?g.icon:void 0})),p(te,B?()=>p("div",{class:"text-no-wrap",innerHTML:g.htmlTip}):g.tip?()=>p("div",{class:"text-no-wrap"},g.tip):void 0)])}),m=[t.toolbarBackgroundClass.value,w]}const l=e.highlight&&r!==e.label,y=p(Ve,{...t.buttonProps.value,noCaps:!0,noWrap:!0,color:l?t.props.toolbarToggleColor:t.props.toolbarColor,textColor:l&&!t.props.toolbarPush?null:t.props.toolbarTextColor,label:e.fixedLabel?e.label:r,icon:e.fixedIcon?e.icon!==null?e.icon:void 0:s,contentClass:m,onShow:u=>t.emit("dropdownShow",u),onHide:u=>t.emit("dropdownHide",u),onBeforeShow:u=>t.emit("dropdownBeforeShow",u),onBeforeHide:u=>t.emit("dropdownBeforeHide",u)},()=>a);return y}function ct(t){if(t.caret)return t.buttons.value.filter(e=>!t.isViewingSource.value||e.find(o=>o.cmd==="viewsource")).map(e=>K(e.map(o=>t.isViewingSource.value&&o.cmd!=="viewsource"?!1:o.type==="slot"?ze(t.slots[o.slot]):o.type==="dropdown"?dt(t,o):se(t,o))))}function mt(t,e,o,r={}){const s=Object.keys(r);if(s.length===0)return{};const m={default_font:{cmd:"fontName",param:t,icon:o,tip:e}};return s.forEach(a=>{const f=r[a];m[a]={cmd:"fontName",param:f,icon:o,tip:f,htmlTip:`<font face="${f}">${f}</font>`}}),m}function pt(t){if(t.caret){const e=t.props.toolbarColor||t.props.toolbarTextColor;let o=t.editLinkUrl.value;const r=()=>{t.caret.restore(),o!==t.editLinkUrl.value&&document.execCommand("createLink",!1,o===""?" ":o),t.editLinkUrl.value=null};return[p("div",{class:`q-mx-xs text-${e}`},`${t.$q.lang.editor.url}: `),p("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:o,onInput:s=>{Le(s),o=s.target.value},onKeydown:s=>{if(ie(s)!==!0)switch(s.keyCode){case 13:return G(s),r();case 27:G(s),t.caret.restore(),(!t.editLinkUrl.value||t.editLinkUrl.value==="https://")&&document.execCommand("unlink"),t.editLinkUrl.value=null;break}}}),K([p(M,{key:"qedt_btm_rem",tabindex:-1,...t.buttonProps.value,label:t.$q.lang.label.remove,noCaps:!0,onClick:()=>{t.caret.restore(),document.execCommand("unlink"),t.editLinkUrl.value=null}}),p(M,{key:"qedt_btm_upd",...t.buttonProps.value,label:t.$q.lang.label.update,noCaps:!0,onClick:r})])]}}const ft=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,gt=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(t=>"[object "+t+"]"));function oe(t){if(t!==Object(t)||gt.has(ft.call(t))===!0||t.constructor&&Q.call(t,"constructor")===!1&&Q.call(t.constructor.prototype,"isPrototypeOf")===!1)return!1;let e;for(e in t);return e===void 0||Q.call(t,e)}function ae(){let t,e,o,r,s,m,a=arguments[0]||{},f=1,l=!1;const y=arguments.length;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},f=2),Object(a)!==a&&typeof a!="function"&&(a={}),y===f&&(a=this,f--);f<y;f++)if((t=arguments[f])!==null)for(e in t)o=a[e],r=t[e],a!==r&&(l===!0&&r&&((s=Array.isArray(r))||oe(r)===!0)?(s===!0?m=Array.isArray(o)===!0?o:[]:m=oe(o)===!0?o:{},a[e]=ae(l,m,r)):r!==void 0&&(a[e]=r));return a}var ht=Oe({name:"QEditor",props:{...Ee,...We,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:t=>t.length===0||t.every(e=>e.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:t=>["div","p"].includes(t),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...Xe,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(t,{slots:e,emit:o}){const{proxy:r}=Ue(),{$q:s}=r,m=Ne(t,s),{inFullscreen:a,toggleFullscreen:f}=Ge(),l=He(),y=E(null),u=E(null),w=E(null),z=E(!1),g=k(()=>!t.readonly&&!t.disable);let N,$,B=t.modelValue;document.execCommand("defaultParagraphSeparator",!1,t.paragraphTag),N=window.getComputedStyle(document.body).fontFamily;const O=k(()=>t.toolbarBg?` bg-${t.toolbarBg}`:""),ue=k(()=>{const i=t.toolbarOutline!==!0&&t.toolbarPush!==!0;return{type:"a",flat:i,noWrap:!0,outline:t.toolbarOutline,push:t.toolbarPush,rounded:t.toolbarRounded,dense:!0,color:t.toolbarColor,disable:!g.value,size:"sm"}}),H=k(()=>{const i=s.lang.editor,n=s.iconSet.editor;return{bold:{cmd:"bold",icon:n.bold,tip:i.bold,key:66},italic:{cmd:"italic",icon:n.italic,tip:i.italic,key:73},strike:{cmd:"strikeThrough",icon:n.strikethrough,tip:i.strikethrough,key:83},underline:{cmd:"underline",icon:n.underline,tip:i.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:n.unorderedList,tip:i.unorderedList},ordered:{cmd:"insertOrderedList",icon:n.orderedList,tip:i.orderedList},subscript:{cmd:"subscript",icon:n.subscript,tip:i.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:n.superscript,tip:i.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:d=>d.caret&&!d.caret.can("link"),icon:n.hyperlink,tip:i.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:n.toggleFullscreen,tip:i.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:n.viewSource,tip:i.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:n.quote,tip:i.quote,key:81},left:{cmd:"justifyLeft",icon:n.left,tip:i.left},center:{cmd:"justifyCenter",icon:n.center,tip:i.center},right:{cmd:"justifyRight",icon:n.right,tip:i.right},justify:{cmd:"justifyFull",icon:n.justify,tip:i.justify},print:{type:"no-state",cmd:"print",icon:n.print,tip:i.print,key:80},outdent:{type:"no-state",disable:d=>d.caret&&!d.caret.can("outdent"),cmd:"outdent",icon:n.outdent,tip:i.outdent},indent:{type:"no-state",disable:d=>d.caret&&!d.caret.can("indent"),cmd:"indent",icon:n.indent,tip:i.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:n.removeFormat,tip:i.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:n.hr,tip:i.hr},undo:{type:"no-state",cmd:"undo",icon:n.undo,tip:i.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:n.redo,tip:i.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:n.heading1||n.heading,tip:i.heading1,htmlTip:`<h1 class="q-ma-none">${i.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:n.heading2||n.heading,tip:i.heading2,htmlTip:`<h2 class="q-ma-none">${i.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:n.heading3||n.heading,tip:i.heading3,htmlTip:`<h3 class="q-ma-none">${i.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:n.heading4||n.heading,tip:i.heading4,htmlTip:`<h4 class="q-ma-none">${i.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:n.heading5||n.heading,tip:i.heading5,htmlTip:`<h5 class="q-ma-none">${i.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:n.heading6||n.heading,tip:i.heading6,htmlTip:`<h6 class="q-ma-none">${i.heading6}</h6>`},p:{cmd:"formatBlock",param:t.paragraphTag,icon:n.heading,tip:i.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:n.code,htmlTip:`<code>${i.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:n.size1||n.size,tip:i.size1,htmlTip:`<font size="1">${i.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:n.size2||n.size,tip:i.size2,htmlTip:`<font size="2">${i.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:n.size3||n.size,tip:i.size3,htmlTip:`<font size="3">${i.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:n.size4||n.size,tip:i.size4,htmlTip:`<font size="4">${i.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:n.size5||n.size,tip:i.size5,htmlTip:`<font size="5">${i.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:n.size6||n.size,tip:i.size6,htmlTip:`<font size="6">${i.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:n.size7||n.size,tip:i.size7,htmlTip:`<font size="7">${i.size7}</font>`}}}),V=k(()=>{const i=t.definitions||{},n=t.definitions||t.fonts?ae(!0,{},H.value,i,mt(N,s.lang.editor.defaultFont,s.iconSet.editor.font,t.fonts)):H.value;return t.toolbar.map(d=>d.map(h=>{if(h.options)return{type:"dropdown",icon:h.icon,label:h.label,size:"sm",dense:!0,fixedLabel:h.fixedLabel,fixedIcon:h.fixedIcon,highlight:h.highlight,list:h.list,options:h.options.map(Te=>n[Te])};const S=n[h];return S?S.type==="no-state"||i[h]&&(S.cmd===void 0||H.value[S.cmd]&&H.value[S.cmd].type==="no-state")?S:Object.assign({type:"toggle"},S):{type:"slot",slot:h}}))}),v={$q:s,props:t,slots:e,emit:o,inFullscreen:a,toggleFullscreen:f,runCmd:I,isViewingSource:z,editLinkUrl:w,toolbarBackgroundClass:O,buttonProps:ue,contentRef:u,buttons:V,setContent:_};Y(()=>t.modelValue,i=>{B!==i&&(B=i,_(i,!0))}),Y(w,i=>{o(`link${i?"Show":"Hide"}`)});const de=k(()=>t.toolbar&&t.toolbar.length!==0),ce=k(()=>{const i={},n=d=>{d.key&&(i[d.key]={cmd:d.cmd,param:d.param})};return V.value.forEach(d=>{d.forEach(h=>{h.options?h.options.forEach(n):n(h)})}),i}),me=k(()=>a.value?t.contentStyle:[{minHeight:t.minHeight,height:t.height,maxHeight:t.maxHeight},t.contentStyle]),pe=k(()=>`q-editor q-editor--${z.value===!0?"source":"default"}`+(t.disable===!0?" disabled":"")+(a.value===!0?" fullscreen column":"")+(t.square===!0?" q-editor--square no-border-radius":"")+(t.flat===!0?" q-editor--flat":"")+(t.dense===!0?" q-editor--dense":"")+(m.value===!0?" q-editor--dark q-dark":"")),fe=k(()=>[t.contentClass,"q-editor__content",{col:a.value,"overflow-auto":a.value||t.maxHeight}]),ge=k(()=>t.disable===!0?{"aria-disabled":"true"}:{});function he(){if(u.value!==null){const i=`inner${z.value===!0?"Text":"HTML"}`,n=u.value[i];n!==t.modelValue&&(B=n,o("update:modelValue",n))}}function ve(i){if(o("keydown",i),i.ctrlKey!==!0||ie(i)===!0){q();return}const n=i.keyCode,d=ce.value[n];if(d!==void 0){const{cmd:h,param:S}=d;Ae(i),I(h,S,!1)}}function be(i){q(),o("click",i)}function ye(i){if(u.value!==null){const{scrollTop:n,scrollHeight:d}=u.value;$=d-n}v.caret.save(),o("blur",i)}function ke(i){Fe(()=>{u.value!==null&&$!==void 0&&(u.value.scrollTop=u.value.scrollHeight-$)}),o("focus",i)}function Ce(i){const n=y.value;if(n!==null&&n.contains(i.target)===!0&&(i.relatedTarget===null||n.contains(i.relatedTarget)!==!0)){const d=`inner${z.value===!0?"Text":"HTML"}`;v.caret.restorePosition(u.value[d].length),q()}}function we(i){const n=y.value;n!==null&&n.contains(i.target)===!0&&(i.relatedTarget===null||n.contains(i.relatedTarget)!==!0)&&(v.caret.savePosition(),q())}function W(){$=void 0}function X(i){v.caret.save()}function _(i,n){if(u.value!==null){n===!0&&v.caret.savePosition();const d=`inner${z.value===!0?"Text":"HTML"}`;u.value[d]=i,n===!0&&(v.caret.restorePosition(u.value[d].length),q())}}function I(i,n,d=!0){j(),v.caret.restore(),v.caret.apply(i,n,()=>{j(),v.caret.save(),d&&q()})}function q(){setTimeout(()=>{w.value=null,r.$forceUpdate()},1)}function j(){_e(()=>{u.value!==null&&u.value.focus({preventScroll:!0})})}function Se(){return u.value}return xe(()=>{v.caret=r.caret=new ut(u.value,v),_(t.modelValue),q(),document.addEventListener("selectionchange",X)}),Re(()=>{document.removeEventListener("selectionchange",X)}),Object.assign(r,{runCmd:I,refreshToolbar:q,focus:j,getContentEl:Se}),()=>{let i;if(de.value){const n=[p("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+O.value},ct(v))];w.value!==null&&n.push(p("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+O.value},pt(v))),i=p("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},n)}return p("div",{ref:y,class:pe.value,style:{height:a.value===!0?"100%":null},...ge.value,onFocusin:Ce,onFocusout:we},[i,p("div",{ref:u,style:me.value,class:fe.value,contenteditable:g.value,placeholder:t.placeholder,...l.listeners.value,onInput:he,onKeydown:ve,onClick:be,onBlur:ye,onFocus:ke,onMousedown:W,onTouchstartPassive:W})])}}});const vt=[{name:"nombre",field:"nombre",label:"Nombre",align:"left",sortable:!0},{name:"estado",field:"estado",label:"Estado",align:"left",sortable:!0},{name:"precio_unitario",field:"precio_unitario",label:"Precio",align:"left",sortable:!0},{name:"gravable",field:"gravable",label:"Gravable",align:"left",sortable:!0},{name:"iva",field:"iva",label:"Iva",align:"left",sortable:!0}];class bt extends rt{constructor(){super(Ie.servicios)}}class yt extends lt{constructor(){super();b(this,"nombre");b(this,"descripcion");b(this,"categoria");b(this,"estado");b(this,"precio_unitario");b(this,"gravable");b(this,"iva");b(this,"es_plan");b(this,"imagen");b(this,"url_video");b(this,"url_destino");b(this,"url_paypal");this.nombre=null,this.descripcion="",this.categoria=null,this.estado=je.BORRADOR,this.precio_unitario=null,this.gravable=!0,this.iva=null,this.es_plan=!1,this.imagen=null,this.url_video=null,this.url_destino=null,this.url_paypal=null}}var kt=De({components:{TabLayout:tt,SelectorImagen:ot},setup(){const t=new it(yt,new bt),{entidad:e,disabled:o,listadosAuxiliares:r,accion:s}=t.useReferencias(),{setValidador:m,obtenerListados:a,cargarVista:f}=t.useComportamiento(),y=et({nombre:{required:F},estado:{required:F},precio_unitario:{required:F},url_destino:{required:F}},e);return m(y.value),f(async()=>{await a({categorias:new nt,estadosProducto:Qe})}),{mixin:t,servicio:e,accion:s,v$:y,disabled:o,configuracionColumnas:vt,listadosAuxiliares:r,isPwd:E(!0)}}});const Ct={class:"row q-col-gutter-sm q-mb-lg"},wt={class:"col-12 col-md-3 q-mb-md"},St={class:"error-msg"},Tt={class:"col-12 col-md-3 q-mb-md"},$t={class:"col-12 col-md-3 q-mb-md"},qt={class:"col-12 q-mb-md"},Pt={class:"col-12 col-md-3 q-mb-md"},zt={class:"error-msg"},Lt={class:"col-12 col-md-3 q-mb-md"},Bt={class:"error-msg"},Ot={class:"col-12 col-md-3 q-mb-md"},Et={class:"col-12 col-md-3 q-mb-md"},Nt={class:"col-12 col-md-3"},Ht={class:"row"},xt={class:"col-12 q-mb-md"},Rt={class:"error-msg"};function Ut(t,e,o,r,s,m){const a=Z("selector-imagen"),f=Z("tab-layout");return T(),Me(f,{mixin:t.mixin,configuracionColumnas:t.configuracionColumnas,"titulo-pagina":"Planes y servicios"},{formulario:L(()=>[C(Je,{onSubmit:e[12]||(e[12]=Ke(()=>{},["prevent"]))},{default:L(()=>[c("div",Ct,[c("div",wt,[e[13]||(e[13]=c("label",{class:"q-mb-sm block"},"Nombre",-1)),C(x,{modelValue:t.servicio.nombre,"onUpdate:modelValue":[e[0]||(e[0]=l=>t.servicio.nombre=l),e[1]||(e[1]=l=>t.servicio.nombre=l.toUpperCase())],placeholder:"Obligatorio",disable:t.disabled,error:!!t.v$.nombre.$errors.length,outlined:"",dense:""},{error:L(()=>[(T(!0),P(U,null,R(t.v$.nombre.$errors,l=>(T(),P("div",{key:l.$uid},[c("div",St,A(l.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])]),c("div",Tt,[e[14]||(e[14]=c("label",{class:"q-mb-sm block"},"Categor\xEDa",-1)),C(ee,{modelValue:t.servicio.categoria,"onUpdate:modelValue":e[2]||(e[2]=l=>t.servicio.categoria=l),options:t.listadosAuxiliares.categorias,hint:"Agregue elementos desde el panel de categor\xEDas","transition-show":"flip-up","transition-hide":"flip-down","options-dense":"",dense:"",outlined:"","option-label":l=>l.nombre,"option-value":l=>l.id,"emit-value":"","map-options":""},null,8,["modelValue","options","option-label","option-value"])]),c("div",$t,[e[15]||(e[15]=c("br",null,null,-1)),C(J,{modelValue:t.servicio.es_plan,"onUpdate:modelValue":e[3]||(e[3]=l=>t.servicio.es_plan=l),label:"Es plan"},null,8,["modelValue"])]),c("div",qt,[e[16]||(e[16]=c("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),C(ht,{modelValue:t.servicio.descripcion,"onUpdate:modelValue":e[4]||(e[4]=l=>t.servicio.descripcion=l),"min-height":"5rem"},null,8,["modelValue"])]),c("div",Pt,[e[17]||(e[17]=c("label",{class:"q-mb-sm block"},"Estado",-1)),C(ee,{modelValue:t.servicio.estado,"onUpdate:modelValue":e[5]||(e[5]=l=>t.servicio.estado=l),options:t.listadosAuxiliares.estadosProducto,error:!!t.v$.estado.$errors.length,"transition-show":"flip-up","transition-hide":"flip-down","options-dense":"",dense:"",outlined:"","option-label":l=>l.nombre,"option-value":l=>l.id,"emit-value":"","map-options":""},{error:L(()=>[(T(!0),P(U,null,R(t.v$.estado.$errors,l=>(T(),P("div",{key:l.$uid},[c("div",zt,A(l.$message),1)]))),128))]),_:1},8,["modelValue","options","error","option-label","option-value"])]),c("div",Lt,[e[18]||(e[18]=c("label",{class:"q-mb-sm block"},"Precio unitario",-1)),C(x,{modelValue:t.servicio.precio_unitario,"onUpdate:modelValue":[e[6]||(e[6]=l=>t.servicio.precio_unitario=l),e[7]||(e[7]=l=>t.servicio.precio_unitario=l.toUpperCase())],placeholder:"Obligatorio",disable:t.disabled,prefix:"$",error:!!t.v$.precio_unitario.$errors.length,outlined:"",dense:""},{error:L(()=>[(T(!0),P(U,null,R(t.v$.precio_unitario.$errors,l=>(T(),P("div",{key:l.$uid},[c("div",Bt,A(l.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])]),c("div",Ot,[e[19]||(e[19]=c("br",null,null,-1)),C(J,{modelValue:t.servicio.gravable,"onUpdate:modelValue":e[8]||(e[8]=l=>t.servicio.gravable=l),label:"Cobrar IVA"},null,8,["modelValue"])]),c("div",Et,[e[20]||(e[20]=c("label",{class:"q-mb-sm block"},"URL Video",-1)),C(x,{modelValue:t.servicio.url_video,"onUpdate:modelValue":e[9]||(e[9]=l=>t.servicio.url_video=l),placeholder:"Opcional",disable:t.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),c("div",Nt,[e[21]||(e[21]=c("label",{class:"q-mb-sm block"},"Imagen",-1)),C(a,{imagen:t.servicio.imagen,"onUpdate:modelValue":e[10]||(e[10]=l=>t.servicio.imagen=l)},null,8,["imagen"])])]),c("div",Ht,[e[23]||(e[23]=c("div",{class:"text-bold block q-mb-md"},"M\xE9todos de pago",-1)),c("div",xt,[e[22]||(e[22]=c("label",{class:"q-mb-sm block"},"URL para cobro con tarjeta de cr\xE9dito o d\xE9bito",-1)),C(x,{modelValue:t.servicio.url_destino,"onUpdate:modelValue":e[11]||(e[11]=l=>t.servicio.url_destino=l),placeholder:"Opcional",disable:t.disabled,error:!!t.v$.url_destino.$errors.length,outlined:"",dense:""},{error:L(()=>[(T(!0),P(U,null,R(t.v$.url_destino.$errors,l=>(T(),P("div",{key:l.$uid},[c("div",Rt,A(l.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var qo=st(kt,[["render",Ut]]);export{qo as default};
