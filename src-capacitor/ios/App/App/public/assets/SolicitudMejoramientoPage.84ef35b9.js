var h=Object.defineProperty;var x=(e,a,s)=>a in e?h(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s;var u=(e,a,s)=>(x(e,typeof a!="symbol"?a+"":a,s),s);import{d as H,a7 as _,c as E,r as U,bm as ee,G as ae,a9 as oe,$ as w,U as L,J as b,V as p,O as m,bl as $,j as t,Y as v,S as C,L as l,a2 as le,Q as te,N as ie,Z as ne,b_ as re,P as d,a1 as se}from"./index.6072a1b1.js";import{Q as ue}from"./QSelect.8fa0bc61.js";import{Q as me}from"./QForm.7a1734b3.js";import{Q as k,a as de}from"./QTabs.4b078992.js";import{Q as T,a as ce}from"./QTabPanels.2a304c71.js";import{Q as be}from"./QPage.2411b3e2.js";import{E as pe}from"./EssentialTableTabs.c77f843c.js";import{B as fe}from"./buttonSubmits.178f5d81.js";import{u as je}from"./StatusEssentialLoading.d6258813.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";import{C as ve}from"./ContenedorSimpleMixin.6f374d2f.js";import{T as Ce}from"./TransacccionSimpleController.f4dc3690.js";import{E as ye}from"./entidadAuditable.9f5621ba.js";import{u as ge}from"./index.1be77ee8.js";import"./QChip.2863bbd0.js";import"./QItem.159d8e83.js";import"./QMenu.6c964ac0.js";import"./position-engine.71479b28.js";import"./selection.ec88bd7c.js";import"./format.8ac60962.js";import"./QResizeObserver.cd2c994f.js";import"./touch.9135741d.js";import"./use-render-cache.3aae9b27.js";import"./EssentialTable.0effb8dc.js";import"./QTooltip.0b1018fa.js";import"./QBadge.1ab9ad97.js";import"./utils.c7760b0c.js";import"./date.3330acff.js";import"./QToolbarTitle.80dd577d.js";import"./logo.d1d9b491.js";import"./_commonjsHelpers.8402d862.js";import"./EstadosComponent.69881137.js";import"./utils.508c826c.js";import"./use-quasar.52f58024.js";import"./notificaciones.fe24470b.js";import"./Hidratable.166e9fe1.js";const Ve=[{name:"estado",field:"estado",label:"Estado",align:"left",sortable:!0},{name:"cliente",field:"cliente",label:"Cliente",align:"left",sortable:!0},{name:"celular",field:"celular",label:"Celular",align:"left",sortable:!0},{name:"fecha",field:"fecha",label:"Fecha de solicitud",align:"left",sortable:!0},{name:"puntaje_actual",field:"puntaje_actual",label:"Puntaje actual",align:"left",sortable:!0},{name:"puntaje_subir",field:"puntaje_subir",label:"Puntaje a subir",align:"left",sortable:!0}];var qe=H({props:{mixin:{type:Object,required:!0},mostrarButtonSubmits:{type:Boolean,default:!0},configuracionColumnas:{type:Object,required:!0},tituloPagina:{type:String},subtituloPagina:{type:String,default:"SISTEMA"},mostrarFormulario:{type:Boolean,default:!0},mostrarListado:{type:Boolean,default:!0},permitirFiltrar:{type:Boolean,default:!1},permitirConsultar:{type:Boolean,default:!0},permitirEditar:{type:Boolean,default:!0},permitirEliminar:{type:Boolean,default:!0},puedeExportar:{type:Boolean,default:!1},tabOptions:{type:Array,required:!1},tabDefecto:String,full:{type:Boolean,default:!1},labelGuardar:{type:String,default:"Guardar"},accion1:{type:Object,required:!1},accion2:{type:Object,required:!1},accion3:{type:Object,required:!1},accion4:{type:Object,required:!1},accion5:{type:Object,required:!1},accion6:{type:Object,required:!1},accion7:{type:Object,required:!1},accion8:{type:Object,required:!1},accion1Header:{type:Object,required:!1},accion2Header:{type:Object,required:!1},accion3Header:{type:Object,required:!1},accionButtonSubmit:{type:Object,required:!1},filtrar:{type:Function,required:!1},forzarListar:{type:Boolean,default:!1},ajustarCeldas:{type:Boolean,default:!1},customPanel1:{type:Object,required:!1},customPanel2:{type:Object,required:!1},paginate:{type:Boolean,default:!1}},emits:["tab-seleccionado"],components:{EssentialTableTabs:pe,ButtonSubmits:fe},setup(e){var z,A;const{guardar:a,editar:s,eliminar:y,consultar:c,reestablecer:g}=e.mixin.useComportamiento(),{entidad:f,listado:o,accion:i,filtros:j,tabs:n}=e.mixin.useReferencias(),P=_(),S=E(()=>e.accion1),O=[...e.configuracionColumnas,{name:"acciones",field:"acciones",label:"Acciones",align:"center",style:"width:200px"}],B=U(),V=U(!1),q=U(!1),G=ee(),M=ae();e.forzarListar||F(e.tabDefecto);function R(){e.forzarListar&&F(e.tabDefecto)}function F(r){e.filtrar&&e.filtrar(r)}function N(){var r;V.value||(r=e.customPanel1)==null||r.accion(),V.value=!0}function I(){var r;q.value||(r=e.customPanel2)==null||r.accion(),q.value=!0}oe(()=>{n.value=e.mostrarFormulario?"formulario":"listado"});const Q=(A=(z=P.currentRoute.value.name)==null?void 0:z.toString().replaceAll("_"," "))!=null?A:"",J=Q.toLowerCase().substring(0,1).toUpperCase()+Q.toLowerCase().substring(1,Q.length),Y={consultar:({entidad:r})=>{i.value=w.consultar,c(r)},editar:({entidad:r})=>{i.value=w.editar,c(r),console.log(i.value)},eliminar:({entidad:r})=>{i.value=w.eliminar,c(r)}},Z=E(()=>e.permitirConsultar),K=E(()=>{var r;return M.can(`puede.crear.${(r=G.name)==null?void 0:r.toString()}`)}),W=E(()=>e.permitirEditar),X=E(()=>e.permitirEliminar);return{tabs:n,tituloTabla:J,guardar:a,reestablecer:g,entidad:f,listado:o,accion:i,filtros:j,accionTabla:Y,seleccionado:B,columnas:O,consultar:c,editar:s,eliminar:y,forzarListado:R,puedeVer:Z,puedeCrear:K,puedeEditar:W,puedeEliminar:X,aplicarFiltro:F,accionPersonalizada:S,storeCargando:je(),ejecutarUnaVezCustomPanel1:N,ejecutarUnaVezCustomPanel2:I}}});const Ee={class:"row justify-end"};function Pe(e,a,s,y,c,g){const f=L("button-submits"),o=L("essential-table-tabs");return b(),p(be,{padding:""},{default:m(()=>[$(e.$slots,"modales"),t(de,{modelValue:e.tabs,"onUpdate:modelValue":a[3]||(a[3]=i=>e.tabs=i),align:"left","switch-indicator":"","active-class":"tab-active","indicator-color":"transparent",dense:""},{default:m(()=>{var i,j,n,P,S,O,B,V;return[e.mostrarFormulario?(b(),p(k,{key:0,name:"formulario",label:"Formulario",class:v({"tab-inactive":e.tabs!=="formulario"}),"no-caps":""},null,8,["class"])):C("",!0),e.mostrarListado?(b(),p(k,{key:1,name:"listado",label:"Listado",class:v({"tab-inactive":e.tabs!=="listado"}),"no-caps":"",onClick:a[0]||(a[0]=q=>e.forzarListado())},null,8,["class"])):C("",!0),(i=e.customPanel1)!=null&&i.label?(b(),p(k,{key:2,name:(j=e.customPanel1)==null?void 0:j.label,label:(n=e.customPanel1)==null?void 0:n.label,class:v({"tab-inactive":e.tabs!==((P=e.customPanel1)==null?void 0:P.label)}),"no-caps":"",onClick:a[1]||(a[1]=q=>e.ejecutarUnaVezCustomPanel1())},null,8,["name","label","class"])):C("",!0),(S=e.customPanel2)!=null&&S.label?(b(),p(k,{key:3,name:(O=e.customPanel2)==null?void 0:O.label,label:(B=e.customPanel2)==null?void 0:B.label,class:v({"tab-inactive":e.tabs!==((V=e.customPanel2)==null?void 0:V.label)}),"no-caps":"",onClick:a[2]||(a[2]=q=>e.ejecutarUnaVezCustomPanel2())},null,8,["name","label","class"])):C("",!0)]}),_:1},8,["modelValue"]),t(ce,{modelValue:e.tabs,"onUpdate:modelValue":a[9]||(a[9]=i=>e.tabs=i),animated:"","transition-prev":"scale","transition-next":"scale",class:v({"bg-desenfoque border-white rounded-tabpanel":!e.$q.screen.xs}),"keep-alive":""},{default:m(()=>{var i,j;return[t(T,{name:"formulario",class:v({"q-pa-none":e.full})},{default:m(()=>[$(e.$slots,"formulario"),l("div",{class:v({"q-pa-md":e.full})},[l("div",Ee,[e.accionButtonSubmit&&e.accionButtonSubmit.visible()?(b(),p(le,{key:0,color:e.accionButtonSubmit.color,"no-caps":"",push:"",class:"q-mr-sm",onClick:a[4]||(a[4]=n=>e.accionButtonSubmit.accion())},{default:m(()=>[t(te,{name:e.accionButtonSubmit.icono,size:"xs",class:"q-pr-sm"},null,8,["name"]),l("span",null,ie(e.accionButtonSubmit.titulo),1)]),_:1},8,["color"])):C("",!0),e.mostrarButtonSubmits?(b(),p(f,{key:1,accion:e.accion,permitirGuardar:e.puedeCrear,disabled:e.storeCargando.cargando,labelGuardar:e.labelGuardar,onCancelar:a[5]||(a[5]=n=>e.reestablecer()),onEditar:a[6]||(a[6]=n=>e.editar(e.entidad,e.resetFormularioOnUpdate)),onEliminar:a[7]||(a[7]=n=>e.eliminar(e.entidad,e.cbEliminar)),onGuardar:a[8]||(a[8]=n=>e.guardar(e.entidad))},null,8,["accion","permitirGuardar","disabled","labelGuardar"])):C("",!0)])],2)]),_:3},8,["class"]),t(T,{name:"listado"},{default:m(()=>[t(o,{titulo:e.tituloTabla,configuracionColumnas:e.columnas,datos:e.listado,permitirConsultar:e.puedeVer,permitirEditar:e.puedeEditar,permitirEliminar:e.puedeEliminar,accion1:e.accion1,accion2:e.accion2,accion3:e.accion3,accion4:e.accion4,accion5:e.accion5,accion6:e.accion6,accion7:e.accion7,accion8:e.accion8,accion1Header:e.accion1Header,accion2Header:e.accion2Header,accion3Header:e.accion3Header,mostrarExportar:e.puedeExportar,onConsultar:e.accionTabla.consultar,onEditar:e.accionTabla.editar,onEliminar:e.accionTabla.eliminar,"tab-options":e.tabOptions,onTabSeleccionado:e.aplicarFiltro,"tab-defecto":e.tabDefecto,ajustarCeldas:e.ajustarCeldas,mixin:e.mixin,paginate:e.paginate,permitirFiltrar:e.permitirFiltrar},null,8,["titulo","configuracionColumnas","datos","permitirConsultar","permitirEditar","permitirEliminar","accion1","accion2","accion3","accion4","accion5","accion6","accion7","accion8","accion1Header","accion2Header","accion3Header","mostrarExportar","onConsultar","onEditar","onEliminar","tab-options","onTabSeleccionado","tab-defecto","ajustarCeldas","mixin","paginate","permitirFiltrar"])]),_:1}),t(T,{name:(i=e.customPanel1)==null?void 0:i.label},{default:m(()=>{var n;return[$(e.$slots,(n=e.customPanel1)==null?void 0:n.label)]}),_:3},8,["name"]),t(T,{name:(j=e.customPanel2)==null?void 0:j.label},{default:m(()=>{var n;return[$(e.$slots,(n=e.customPanel2)==null?void 0:n.label)]}),_:3},8,["name"])]}),_:3},8,["modelValue","class"])]),_:3})}var Se=D(qe,[["render",Pe]]);class Oe extends Ce{constructor(){super(ne.solicitudes_mejoramiento)}}class Be extends ye{constructor(){super();u(this,"cliente");u(this,"identificacion_cliente");u(this,"celular");u(this,"estado");u(this,"observacion");u(this,"maximo_subir");u(this,"deudas_vencidas");u(this,"puntaje_actual");u(this,"puntaje_subir");u(this,"fecha");this.cliente=null,this.identificacion_cliente=null,this.celular=null,this.estado=null,this.observacion=null,this.maximo_subir=null,this.deudas_vencidas=null,this.puntaje_actual=null,this.puntaje_subir=null,this.fecha=null}}var $e=H({components:{TabLayoutFilterTabs:Se},setup(){const e=U("pendiente"),a=new ve(Be,new Oe),{entidad:s}=a.useReferencias(),{setValidador:y,listar:c}=a.useComportamiento(),g=ge({},s);y(g.value);const f=[{label:"Pendiente",value:"PENDIENTE"},{label:"En proceso",value:"EN PROCESO"},{label:"Aprobado",value:"APROBADO"},{label:"Negado",value:"NEGADO"}];function o(i){c({estado:i}),e.value=i}return o("pendiente"),{mixin:a,mejoramiento:s,estadosMejoramiento:re,configuracionColumnas:Ve,tabOptions:f,filtrarSolicitudes:o,tabActual:e}}});const ke={class:"row q-col-gutter-sm q-py-md"},Te={class:"col-12 col-md-3 q-mb-md"},Ue={class:"col-12 col-md-3 q-mb-md"},Fe={class:"col-12 col-md-3 q-mb-md"},Qe={class:"col-12 col-md-3 q-mb-md"},we={class:"col-12 col-md-3 q-mb-md"},Le={class:"col-12 col-md-3 q-mb-md"},ze={class:"col-12 col-md-3 q-mb-md"},Ae={class:"col-12 col-md-3 q-mb-md"},He={class:"col-12 col-md-3 q-mb-md"},De={class:"col-12 col-md-3 q-mb-md"};function Ge(e,a,s,y,c,g){const f=L("tab-layout-filter-tabs");return b(),p(f,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Solicitudes de mejoramiento",tabOptions:e.tabOptions,filtrar:e.filtrarSolicitudes,tabDefecto:e.tabActual},{formulario:m(()=>[t(me,{onSubmit:a[11]||(a[11]=se(()=>{},["prevent"]))},{default:m(()=>[l("div",ke,[l("div",Te,[a[12]||(a[12]=l("label",{class:"q-mb-sm block"},"Cliente",-1)),t(d,{modelValue:e.mejoramiento.cliente,"onUpdate:modelValue":a[0]||(a[0]=o=>e.mejoramiento.cliente=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Ue,[a[13]||(a[13]=l("label",{class:"q-mb-sm block"},"Identificaci\xF3n del cliente",-1)),t(d,{modelValue:e.mejoramiento.identificacion_cliente,"onUpdate:modelValue":a[1]||(a[1]=o=>e.mejoramiento.identificacion_cliente=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Fe,[a[14]||(a[14]=l("label",{class:"q-mb-sm block"},"Celular del cliente",-1)),t(d,{modelValue:e.mejoramiento.celular,"onUpdate:modelValue":a[2]||(a[2]=o=>e.mejoramiento.celular=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Qe,[a[15]||(a[15]=l("label",{class:"q-mb-sm block"},"Puntaje actual",-1)),t(d,{modelValue:e.mejoramiento.puntaje_actual,"onUpdate:modelValue":a[3]||(a[3]=o=>e.mejoramiento.puntaje_actual=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",we,[a[16]||(a[16]=l("label",{class:"q-mb-sm block"},"Deudas vencidas",-1)),t(d,{modelValue:e.mejoramiento.deudas_vencidas,"onUpdate:modelValue":a[4]||(a[4]=o=>e.mejoramiento.deudas_vencidas=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Le,[a[17]||(a[17]=l("label",{class:"q-mb-sm block"},"Puntaje a subir",-1)),t(d,{modelValue:e.mejoramiento.puntaje_subir,"onUpdate:modelValue":a[5]||(a[5]=o=>e.mejoramiento.puntaje_subir=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",ze,[a[18]||(a[18]=l("label",{class:"q-mb-sm block"},"M\xE1ximo a subir",-1)),t(d,{modelValue:e.mejoramiento.maximo_subir,"onUpdate:modelValue":a[6]||(a[6]=o=>e.mejoramiento.maximo_subir=o),type:"number",placeholder:"Responder a cliente",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Ae,[a[19]||(a[19]=l("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),t(d,{modelValue:e.mejoramiento.observacion,"onUpdate:modelValue":[a[7]||(a[7]=o=>e.mejoramiento.observacion=o),a[8]||(a[8]=o=>e.mejoramiento.observacion=o.toUpperCase())],placeholder:"Responder a cliente",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",He,[a[20]||(a[20]=l("label",{class:"q-mb-sm block"},"Estado",-1)),t(ue,{modelValue:e.mejoramiento.estado,"onUpdate:modelValue":a[9]||(a[9]=o=>e.mejoramiento.estado=o),options:e.estadosMejoramiento,"transition-show":"flip-up","transition-hide":"flip-down","options-dense":"",dense:"",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),l("div",De,[a[21]||(a[21]=l("label",{class:"q-mb-sm block"},"Fecha de solicitud",-1)),t(d,{modelValue:e.mejoramiento.fecha,"onUpdate:modelValue":a[10]||(a[10]=o=>e.mejoramiento.fecha=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas","tabOptions","filtrar","tabDefecto"])}var Pa=D($e,[["render",Ge]]);export{Pa as default};
